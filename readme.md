<p class="MsoTitle"><b><span lang="RU" style="font-size:28.0pt;color:#42BA97;mso-themecolor:accent4;letter-spacing: 0pt;mso-style-textoutline-type:solid;mso-style-textoutline-fill-color:black; mso-style-textoutline-fill-themecolor:text1;mso-style-textoutline-fill-alpha: 100.0%;mso-style-textoutline-outlinestyle-dpiwidth:.75pt;mso-style-textoutline-outlinestyle-linecap: flat;mso-style-textoutline-outlinestyle-join:round;mso-style-textoutline-outlinestyle-pctmiterlimit: 0%;mso-style-textoutline-outlinestyle-dash:solid;mso-style-textoutline-outlinestyle-align: center;mso-style-textoutline-outlinestyle-compound:simple;mso-bevel-captop-bevelstyle: 2;mso-bevel-captop-dpiwidth:2.0pt;mso-bevel-captop-dpiheight:3.0pt;mso-bevel-capbot-bevelstyle: 0;mso-bevel-capbot-dpiwidth:0pt;mso-bevel-capbot-dpiheight:0pt;mso-bevel-material: 12;mso-bevel-dpiextrusion:4.5pt;mso-bevel-dpicontour:0pt;mso-ansi-language: RU">Техническое задание </span></b><b><span style="font-size:28.0pt;color:#42BA97;mso-themecolor:accent4;letter-spacing: 0pt;mso-style-textoutline-type:solid;mso-style-textoutline-fill-color:black; mso-style-textoutline-fill-themecolor:text1;mso-style-textoutline-fill-alpha: 100.0%;mso-style-textoutline-outlinestyle-dpiwidth:.75pt;mso-style-textoutline-outlinestyle-linecap: flat;mso-style-textoutline-outlinestyle-join:round;mso-style-textoutline-outlinestyle-pctmiterlimit: 0%;mso-style-textoutline-outlinestyle-dash:solid;mso-style-textoutline-outlinestyle-align: center;mso-style-textoutline-outlinestyle-compound:simple;mso-bevel-captop-bevelstyle: 2;mso-bevel-captop-dpiwidth:2.0pt;mso-bevel-captop-dpiheight:3.0pt;mso-bevel-capbot-bevelstyle: 0;mso-bevel-capbot-dpiwidth:0pt;mso-bevel-capbot-dpiheight:0pt;mso-bevel-material: 12;mso-bevel-dpiextrusion:4.5pt;mso-bevel-dpicontour:0pt">abz</span></b><b><span lang="RU" style="font-size:28.0pt; color:#42BA97;mso-themecolor:accent4;letter-spacing:0pt;mso-style-textoutline-type: solid;mso-style-textoutline-fill-color:black;mso-style-textoutline-fill-themecolor: text1;mso-style-textoutline-fill-alpha:100.0%;mso-style-textoutline-outlinestyle-dpiwidth: .75pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-bevel-captop-bevelstyle:2;mso-bevel-captop-dpiwidth:2.0pt; mso-bevel-captop-dpiheight:3.0pt;mso-bevel-capbot-bevelstyle:0;mso-bevel-capbot-dpiwidth: 0pt;mso-bevel-capbot-dpiheight:0pt;mso-bevel-material:12;mso-bevel-dpiextrusion: 4.5pt;mso-bevel-dpicontour:0pt;mso-ansi-language:RU">.</span></b><b><span style="font-size:28.0pt;color:#42BA97; mso-themecolor:accent4;letter-spacing:0pt;mso-style-textoutline-type:solid; mso-style-textoutline-fill-color:black;mso-style-textoutline-fill-themecolor: text1;mso-style-textoutline-fill-alpha:100.0%;mso-style-textoutline-outlinestyle-dpiwidth: .75pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-bevel-captop-bevelstyle:2;mso-bevel-captop-dpiwidth:2.0pt; mso-bevel-captop-dpiheight:3.0pt;mso-bevel-capbot-bevelstyle:0;mso-bevel-capbot-dpiwidth: 0pt;mso-bevel-capbot-dpiheight:0pt;mso-bevel-material:12;mso-bevel-dpiextrusion: 4.5pt;mso-bevel-dpicontour:0pt">agency</span></b><b><span lang="RU" style="font-size:28.0pt;color:#42BA97;mso-themecolor: accent4;letter-spacing:0pt;mso-style-textoutline-type:solid;mso-style-textoutline-fill-color: black;mso-style-textoutline-fill-themecolor:text1;mso-style-textoutline-fill-alpha: 100.0%;mso-style-textoutline-outlinestyle-dpiwidth:.75pt;mso-style-textoutline-outlinestyle-linecap: flat;mso-style-textoutline-outlinestyle-join:round;mso-style-textoutline-outlinestyle-pctmiterlimit: 0%;mso-style-textoutline-outlinestyle-dash:solid;mso-style-textoutline-outlinestyle-align: center;mso-style-textoutline-outlinestyle-compound:simple;mso-bevel-captop-bevelstyle: 2;mso-bevel-captop-dpiwidth:2.0pt;mso-bevel-captop-dpiheight:3.0pt;mso-bevel-capbot-bevelstyle: 0;mso-bevel-capbot-dpiwidth:0pt;mso-bevel-capbot-dpiheight:0pt;mso-bevel-material: 12;mso-bevel-dpiextrusion:4.5pt;mso-bevel-dpicontour:0pt;mso-ansi-language: RU"><o:p></o:p></span></b>
</p>
<p class="MsoNormal"><span lang="RU" style="font-size:14.0pt;line-height:107%; font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family:STKaiti;mso-fareast-theme-font: major-fareast;mso-ansi-language:RU;mso-bidi-font-weight:bold">Разработка онлайн
каталога сотрудников компании с более чем 50,000 сотрудников.
	</span><span lang="RU" style="font-size: 9pt; line-height: 107%; font-family: Consolas; color: rgb(34, 34, 34); background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"> <o:p></o:p></span>
</p>
<p class="MsoNormal"><b><span lang="RU" style="font-size:14.0pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif; mso-ansi-language:RU">Технические характеристики проекта:<o:p></o:p></span></b>
</p>
<p class="MsoNormal" style="line-height:normal"><span style="font-size:12.0pt; font-family:&quot;Times New Roman&quot;,serif">Framework</span><span lang="RU" style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,serif;mso-ansi-language: RU">: </span><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,serif">Laravel</span><span lang="RU" style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,serif;mso-ansi-language: RU"> 5.4<o:p></o:p></span>
</p>
<p class="MsoNormal" style="mso-margin-top-alt:auto;margin-bottom:3.6pt; line-height:normal;vertical-align:middle"><span lang="RU" style="font-size:12.0pt; font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;mso-themecolor:text1;mso-ansi-language:RU;mso-fareast-language: EN-US">Версия </span><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,serif; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;mso-themecolor:text1; mso-fareast-language:EN-US">PHP</span><span lang="RU" style="font-size:12.0pt; font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;mso-themecolor:text1;mso-ansi-language:RU;mso-fareast-language: EN-US">: 7.2.0<o:p></o:p></span>
</p>
<p class="MsoNormal" style="mso-margin-top-alt:auto;margin-bottom:3.6pt; line-height:normal;vertical-align:middle"><span lang="RU" style="font-size:12.0pt; font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;mso-themecolor:text1;mso-ansi-language:RU;mso-fareast-language: EN-US">Версия </span><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,serif; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;mso-themecolor:text1; mso-fareast-language:EN-US">MySQL</span><span lang="RU" style="font-size:12.0pt; font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;mso-themecolor:text1;mso-ansi-language:RU;mso-fareast-language: EN-US">: 5.7<o:p></o:p></span>
</p>
<p class="MsoNormal" style="mso-margin-top-alt:auto;margin-bottom:3.6pt; line-height:normal;vertical-align:middle"><span style="font-size:12.0pt; font-family:&quot;Times New Roman&quot;,serif;color:black;mso-themecolor:text1; background:#F3F3F3">Apache</span><span lang="RU" style="font-size:12.0pt; font-family:&quot;Times New Roman&quot;,serif;color:black;mso-themecolor:text1; background:#F3F3F3;mso-ansi-language:RU">/2.4.29<o:p></o:p></span>
</p>
<p class="MsoNormal" style="mso-margin-top-alt:auto;margin-bottom:3.6pt; line-height:normal;vertical-align:middle"><span lang="RU" style="font-size:12.0pt; font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;mso-themecolor:text1;mso-ansi-language:RU;mso-fareast-language: EN-US"><o:p>&nbsp;</o:p></span>
</p>
<p class="MsoListParagraph" style="text-indent:-18.0pt;mso-list:l0 level1 lfo1">
	<!--[if !supportLists]-->
	<b><span lang="RU" style="font-size:14.0pt; line-height:107%;font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family: &quot;Times New Roman&quot;;mso-ansi-language:RU">1.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></b>
	<!--[endif]-->
	<span lang="RU" style="font-size:14.0pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif; mso-ansi-language:RU">Создание БД для сотрудников компании:<o:p></o:p></span>
</p>
<p class="MsoNormal" style="margin-left:18.0pt"><span lang="RU" style="font-size: 13.5pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif;mso-ansi-language: RU">Была создана БД “</span><span style="font-size:13.5pt;line-height:107%; font-family:&quot;Times New Roman&quot;,serif">company</span><span lang="RU" style="font-size:13.5pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif; mso-ansi-language:RU">”. Заполняем базу данных используя миграции </span><span style="font-size:13.5pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif">Laravel</span><span lang="RU" style="font-size:13.5pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif; mso-ansi-language:RU">.<o:p></o:p></span>
</p>
<p class="MsoNormal" style="margin-left:18.0pt"><span lang="RU" style="font-size: 13.5pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif;mso-ansi-language: RU">На ряду с уже существующими миграциями от Фреймворка было создано еще 2
миграции:
	</span><span lang="RU" style="font-size:14.0pt;line-height:107%; font-family:&quot;Times New Roman&quot;,serif;mso-ansi-language:RU"> </span><span lang="RU" style="font-size:14.0pt;line-height:107%;mso-ascii-font-family:Candara; mso-ascii-theme-font:major-latin;mso-hansi-font-family:Candara;mso-hansi-theme-font: major-latin;mso-bidi-font-family:&quot;Times New Roman&quot;;color:#1CADE4;mso-themecolor: accent1;mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0;mso-ansi-language:RU">create_employees_table</span><span lang="RU" style="font-size:14.0pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif; color:#1CADE4;mso-themecolor:accent1;mso-style-textoutline-type:none; mso-style-textoutline-outlinestyle-dpiwidth:0pt;mso-style-textoutline-outlinestyle-linecap: flat;mso-style-textoutline-outlinestyle-join:round;mso-style-textoutline-outlinestyle-pctmiterlimit: 0%;mso-style-textoutline-outlinestyle-dash:solid;mso-style-textoutline-outlinestyle-align: center;mso-style-textoutline-outlinestyle-compound:simple;mso-effects-shadow-color: #6E747A;mso-effects-shadow-alpha:43.0%;mso-effects-shadow-dpiradius:3.0pt; mso-effects-shadow-dpidistance:2.0pt;mso-effects-shadow-angledirection:5400000; mso-effects-shadow-align:center;mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy: 100.0%;mso-effects-shadow-anglekx:0;mso-effects-shadow-angleky:0;mso-ansi-language: RU"> </span><span lang="RU" style="font-size:13.5pt;line-height:107%;font-family: &quot;Times New Roman&quot;,serif;mso-ansi-language:RU">(нужна для хранения информации о
сотрудниках), и
	</span><span lang="RU" style="font-size:14.0pt;line-height:107%; font-family:&quot;Times New Roman&quot;,serif;mso-ansi-language:RU"> </span><span style="font-size:14.0pt;line-height:107%;mso-ascii-font-family:Candara; mso-ascii-theme-font:major-latin;mso-hansi-font-family:Candara;mso-hansi-theme-font: major-latin;mso-bidi-font-family:&quot;Times New Roman&quot;;color:#1CADE4;mso-themecolor: accent1;mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0">create</span><span lang="RU" style="font-size: 14.0pt;line-height:107%;mso-ascii-font-family:Candara;mso-ascii-theme-font: major-latin;mso-hansi-font-family:Candara;mso-hansi-theme-font:major-latin; mso-bidi-font-family:&quot;Times New Roman&quot;;color:#1CADE4;mso-themecolor:accent1; mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0;mso-ansi-language:RU">_</span><span style="font-size:14.0pt;line-height:107%;mso-ascii-font-family:Candara; mso-ascii-theme-font:major-latin;mso-hansi-font-family:Candara;mso-hansi-theme-font: major-latin;mso-bidi-font-family:&quot;Times New Roman&quot;;color:#1CADE4;mso-themecolor: accent1;mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0">position</span><span lang="RU" style="font-size: 14.0pt;line-height:107%;mso-ascii-font-family:Candara;mso-ascii-theme-font: major-latin;mso-hansi-font-family:Candara;mso-hansi-theme-font:major-latin; mso-bidi-font-family:&quot;Times New Roman&quot;;color:#1CADE4;mso-themecolor:accent1; mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0;mso-ansi-language:RU">_</span><span style="font-size:14.0pt;line-height:107%;mso-ascii-font-family:Candara; mso-ascii-theme-font:major-latin;mso-hansi-font-family:Candara;mso-hansi-theme-font: major-latin;mso-bidi-font-family:&quot;Times New Roman&quot;;color:#1CADE4;mso-themecolor: accent1;mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0">table</span><span style="font-size:14.0pt; line-height:107%;font-family:&quot;Times New Roman&quot;,serif;mso-ansi-language:RU"> </span><span lang="RU" style="font-size:13.5pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif; mso-ansi-language:RU">(нужна для хранения должности сотрудника и его зарплаты,
зп. начисляется в зависимости от должности).
	<o:p></o:p></span>
</p>
<div style="border-width: 1pt; border-style: solid; border-color: windowtext; padding: 1pt 4pt 1pt 0cm; background-position: initial; background-color: rgb(242, 242, 242); margin-left: 18pt; margin-right: 0cm;">
	<p class="MsoNormal" style="text-align: justify; background-position: initial; background-color: rgb(242, 242, 242); border-width: initial; border-style: none; padding: 0cm;"><span lang="RU" style="font-size:12.0pt;line-height:107%; font-family:&quot;Times New Roman&quot;,serif;color:#2E653E;mso-themecolor:accent5; mso-themeshade:191;mso-ansi-language:RU">&nbsp;
		</span><span style="font-size:12.0pt;line-height:107%;font-family:&quot;Times New Roman&quot;,serif; color:#2E653E;mso-themecolor:accent5;mso-themeshade:191">php artisan
make:migration create_position_table --create=position
		<o:p></o:p></span>
	</p>
	<p class="MsoNormal" style="text-align: justify; background-position: initial; background-color: rgb(242, 242, 242); border-width: initial; border-style: none; padding: 0cm;"><span style="font-size:12.0pt;line-height:107%; font-family:&quot;Times New Roman&quot;,serif;color:#2E653E;mso-themecolor:accent5; mso-themeshade:191">&nbsp; php artisan
make:migration create_employees_table --create= employees
		<o:p></o:p></span>
	</p>
</div>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: normal; background-position: initial; background-color: white;"><span style="font-size:12.0pt;font-family:&quot;Courier New&quot;; mso-fareast-font-family:&quot;Times New Roman&quot;;color:#1CADE4;mso-themecolor:accent1; background:#F7FAFF;mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0;mso-fareast-language:EN-US">CreateEmployeesTable
	</span><span style="font-size:13.0pt;font-family:&quot;Times New Roman&quot;,serif; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;background:#F7FAFF; mso-fareast-language:EN-US">(</span><span lang="RU" style="font-size:13.0pt; font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-ansi-language:RU;mso-fareast-language:EN-US">содержит</span><span lang="RU" style="font-size:13.0pt;font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family: &quot;Times New Roman&quot;;color:black;background:#F7FAFF;mso-fareast-language:EN-US"> </span><span lang="RU" style="font-size:13.0pt;font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family: &quot;Times New Roman&quot;;color:black;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">поля</span><span style="font-size:13.0pt; font-family:&quot;Times New Roman&quot;,serif;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">):</span><span style="font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US"><o:p></o:p></span>
</p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: normal; background-position: initial; background-color: white;"><span style="font-size:12.0pt;font-family:&quot;Courier New&quot;; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;background:#F7FAFF; mso-fareast-language:EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span>
</p>
<div style="border-width: 1pt; border-style: solid; border-color: windowtext; padding: 1pt 4pt; background-position: initial; background-color: rgb(242, 242, 242); margin-left: 21.3pt; margin-right: 0cm;">
	<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: normal; background-position: initial; background-color: rgb(242, 242, 242); border-width: initial; border-style: none; padding: 0cm;"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;background:#F7FAFF; mso-fareast-language:EN-US">Schema::<i>create</i>(</span><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:green;background:#F7FAFF;mso-fareast-language:EN-US">'employees'</span></b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">, </span><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:navy;background:#F7FAFF;mso-fareast-language:EN-US">function </span></b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">(Blueprint </span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:#660000;background:#F7FAFF;mso-fareast-language:EN-US">$table</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">) {<br>
		&nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt; font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;color:#660000; background:#F7FAFF;mso-fareast-language:EN-US">$table</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">-&gt;increments(</span><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:green;background:#F7FAFF;mso-fareast-language:EN-US">'id'</span></b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">);<br>
		&nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt; font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;color:#660000; background:#F7FAFF;mso-fareast-language:EN-US">$table</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">-&gt;integer(</span><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:green;background:#F7FAFF;mso-fareast-language:EN-US">'parent_id'</span></b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">)-&gt;default(</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:blue;background:#F7FAFF;mso-fareast-language:EN-US">0</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">);</span><i><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US">//</span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">Ссылка</span></i><i><span lang="RU" style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US"> </span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">на</span></i><i><span lang="RU" style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US"> </span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">начальника</span></i><i><span style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US"><br>
		&nbsp;&nbsp;&nbsp; </span></i><span style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:#660000;background:#F7FAFF;mso-fareast-language:EN-US">$table</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">-&gt;tinyInteger(</span><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:green;background:#F7FAFF;mso-fareast-language:EN-US">'position_id'</span></b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">);</span><i><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US">//</span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">Должность</span></i><i><span style="font-size:10.0pt; font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;color:gray; background:#F7FAFF;mso-fareast-language:EN-US"><br>
		&nbsp;&nbsp;&nbsp; </span></i><span style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:#660000;background:#F7FAFF;mso-fareast-language:EN-US">$table</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">-&gt;string(</span><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:green;background:#F7FAFF;mso-fareast-language:EN-US">'name'</span></b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">, </span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:blue;background:#F7FAFF;mso-fareast-language:EN-US">60</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">);</span><i><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US">//</span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">ФИО</span></i><i><span lang="RU" style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US"> </span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">сотрудника</span></i><i><span style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US"><br>
		&nbsp;&nbsp;&nbsp; </span></i><span style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:#660000;background:#F7FAFF;mso-fareast-language:EN-US">$table</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">-&gt;date(</span><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:green;background:#F7FAFF;mso-fareast-language:EN-US">'date'</span></b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">);</span><i><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US">//</span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">Дата</span></i><i><span lang="RU" style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US"> </span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">приема</span></i><i><span style="font-size:10.0pt; font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;;color:gray; background:#F7FAFF;mso-fareast-language:EN-US"><br>
		&nbsp;&nbsp;&nbsp; </span></i><span style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:#660000;background:#F7FAFF;mso-fareast-language:EN-US">$table</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">-&gt;string(</span><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:green;background:#F7FAFF;mso-fareast-language:EN-US">'image'</span></b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">, </span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:blue;background:#F7FAFF;mso-fareast-language:EN-US">100</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">);</span><i><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US">//</span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">Фото</span></i><i><span lang="RU" style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US"> </span></i><i><span lang="RU" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:gray;background:#F7FAFF;mso-ansi-language:RU; mso-fareast-language:EN-US">сотрудника</span></i><i><span style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:gray;background:#F7FAFF;mso-fareast-language:EN-US"><br>
		&nbsp;&nbsp;&nbsp; </span></i><span style="font-size: 10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:#660000;background:#F7FAFF;mso-fareast-language:EN-US">$table</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;background:#F7FAFF;mso-fareast-language:EN-US">-&gt;timestamps();<br>
		});</span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family: &quot;Times New Roman&quot;;color:black;mso-fareast-language:EN-US"><o:p></o:p></span>
	</p>
</div>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt 14.2pt; line-height: normal; background-position: initial; background-color: white;"><span style="font-size: 12.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Times New Roman&quot;; color:black;mso-fareast-language:EN-US"><o:p>&nbsp;</o:p></span>
</p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: normal; background-position: initial; background-color: white;"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;background:#F7FAFF; mso-fareast-language:EN-US"><o:p>&nbsp;</o:p></span>
</p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: normal; background-position: initial; background-color: white;"><span lang="RU" style="font-family:&quot;Times New Roman&quot;,serif; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;mso-themecolor:text1; background:#F7FAFF;mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0;mso-ansi-language:RU;mso-fareast-language:EN-US">Информация
о каждом сотруднике должна храниться в базе данных и содержать следующие
данные:
	<o:p></o:p></span>
</p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: normal; background-position: initial; background-color: white;"><span lang="RU" style="font-family:&quot;Times New Roman&quot;,serif; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;mso-themecolor:text1; background:#F7FAFF;mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0;mso-ansi-language:RU;mso-fareast-language:EN-US">○
ФИО;
	<o:p></o:p></span>
</p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: normal; background-position: initial; background-color: white;"><span lang="RU" style="font-family:&quot;Times New Roman&quot;,serif; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;mso-themecolor:text1; background:#F7FAFF;mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0;mso-ansi-language:RU;mso-fareast-language:EN-US">○
Должность;
	<o:p></o:p></span>
</p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: normal; background-position: initial; background-color: white;"><span lang="RU" style="font-family:&quot;Times New Roman&quot;,serif; mso-fareast-font-family:&quot;Times New Roman&quot;;color:black;mso-themecolor:text1; background:#F7FAFF;mso-style-textoutline-type:none;mso-style-textoutline-outlinestyle-dpiwidth: 0pt;mso-style-textoutline-outlinestyle-linecap:flat;mso-style-textoutline-outlinestyle-join: round;mso-style-textoutline-outlinestyle-pctmiterlimit:0%;mso-style-textoutline-outlinestyle-dash: solid;mso-style-textoutline-outlinestyle-align:center;mso-style-textoutline-outlinestyle-compound: simple;mso-effects-shadow-color:#6E747A;mso-effects-shadow-alpha:43.0%; mso-effects-shadow-dpiradius:3.0pt;mso-effects-shadow-dpidistance:2.0pt; mso-effects-shadow-angledirection:5400000;mso-effects-shadow-align:center; mso-effects-shadow-pctsx:100.0%;mso-effects-shadow-pctsy:100.0%;mso-effects-shadow-anglekx: 0;mso-effects-shadow-angleky:0;mso-ansi-language:RU;mso-fareast-language:EN-US">○
Дата приема на работу;
	<o:p></o:p></span>
</p>
<p><span style="background-color: rgb(247, 250, 255); color: black; font-family: &quot;Times New Roman&quot;, serif;">○
Размер заработной платы;
	</span>
</p>
<p><span style="color: #1cade4;">CreatePositionTable</span><span style="color: black;">
	</span><span style="color: black;">(содержит поля):</span><span style="color: black;"></span>
</p>
<p><span style="color: black;"></span>
</p>
<div style="margin-left: 21pt; margin-right: 0cm;">
	<p><span style="color: black;">Schema::<em>create</em>(</span><strong><span style="color: green;">'position'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(Blueprint </span><span style="color: #660000;">$table</span><span style="color: black;">) {<br></span><span style="color: #660000;">$table</span><span style="color: black;">-&gt;increments(</span><strong><span style="color: green;">'id'</span></strong><span style="color: black;">);<br></span><span style="color: #660000;">$table</span><span style="color: black;">-&gt;string(</span><strong><span style="color: green;">'position'</span></strong><span style="color: black;">, </span><span style="color: blue;">40</span><span style="color: black;">);</span><em><span style="color: gray;">//Наименование должности<br></span></em><span style="color: #660000;">$table</span><span style="color: black;">-&gt;integer(</span><strong><span style="color: green;">'salary'</span></strong><span style="color: black;">);</span><em><span style="color: gray;">//Уровень ЗП<br></span></em><span style="color: #660000;">$table</span><span style="color: black;">-&gt;timestamps();<br> });</span><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: black;">После делаем запуск всех необходимых миграций используя </span><span style="color: black;">Artisan</span><span style="color: black;">-команду </span><span style="color: black;">migrate</span><span style="color: black;">:</span>
</p>
<p><span style="color: black;"></span>
</p>
<div>
	<p><span style="color: white;"></span>
	</p>
	<p><span style="color: white;">php</span><span style="color: white;"> </span><span style="color: white;">artisan</span><span style="color: white;"> </span><span style="color: white;">migrate</span><span style="color: white;"></span>
	</p>
	<p><span style="color: white;"></span>
	</p>
</div>
<p>Проверяем содержимое базы данных “company”:
</p>
<p>+------------------------------------+
</p>
<p> | Tables_in_company |
</p>
<p>+------------------------------------+
</p>
<p>| employees |
</p>
<p>| migrations |
</p>
<p>| password_resets |
</p>
<p>| position |
</p>
<p>| users |
</p>
<p>+------------------------------------+
</p>
<p>5 rows in set (0.00 sec)
</p>
<p><strong>1.<span style="font-weight: normal;">
	</span></strong><span style="color: black;">Для добавления данных в БД используем</span><span style="color: black;"> </span><a href="http://laravel.su/docs/5.4/artisan" target="_blank" class="external" rel="nofollow"><span style="color: black;">Artisan</span><span style="color: black;">-команду</span></a><span style="color: #565656;"> </span><span style="color: #f4645f;">make</span><span style="color: #f4645f;">:</span><span style="color: #f4645f;">seeder</span><span style="color: #565656;">. </span><span style="color: black;">Все начальные данные, сгенерированные фреймворком, будут помещены в директорию</span><span style="color: black;"> </span><span style="color: #f4645f;">database</span><span style="color: #f4645f;">/</span><span style="color: #f4645f;">seeds</span><span style="color: #f4645f;">.</span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt;">Для заполнения нашей БД для таблицы <span style="color: #1cade4;">emploees </span>будем использовать фабрики моделей. Создем
модели для таблиц
	<span style="color: #1cade4;">position </span>и
	<span style="color: #1cade4;">employees</span>.
</p>
<div style="margin-left: 18pt; margin-right: 0cm;">
	<p>php artisan make:model Employees
	</p>
	<p>Model created successfully.
	</p>
	<p>php artisan make:model Position
	</p>
	<p>Model created successfully.
	</p>
</div>
<p style="margin-right: 0cm; margin-left: 18pt;">Создаем
фабрику для таблицы
	<span style="color: #1cade4;">employees</span>:
</p>
<div>
	<p><span style="color: #660000;">$factory</span><span style="color: black;">-&gt;defineAs(App\Employees::</span><strong><span style="color: navy;">class</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'general'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(Faker\Generator </span><span style="color: #660000;">$faker</span><span style="color: black;">) {<br></span><span style="color: #660000;">$faker </span><span style="color: black;">= \Faker\Factory::<em>create</em>(</span><strong><span style="color: green;">'ru_RU'</span></strong><span style="color: black;">);<br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">[<br></span><strong><span style="color: green;">'name' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: navy;">name</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'parent_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">0</span><span style="color: black;">,<br></span><strong><span style="color: green;">'position_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">1</span><span style="color: black;">,<br></span><strong><span style="color: green;">'date' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'img/general.jpg'<br></span></strong><span style="color: black;">];<br> });<br><br></span><span style="color: #660000;">$factory</span><span style="color: black;">-&gt;defineAs(App\Employees::</span><strong><span style="color: navy;">class</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'top_menager'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(Faker\Generator </span><span style="color: #660000;">$faker</span><span style="color: black;">) {<br></span><span style="color: #660000;">$faker </span><span style="color: black;">= \Faker\Factory::<em>create</em>(</span><strong><span style="color: green;">'ru_RU'</span></strong><span style="color: black;">);<br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">[<br></span><strong><span style="color: green;">'name' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: navy;">name</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'parent_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">1</span><span style="color: black;">,<br></span><strong><span style="color: green;">'position_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">2</span><span style="color: black;">,<br></span><strong><span style="color: green;">'date' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'img/top_manager.jpg'<br></span></strong><span style="color: black;">];<br> });<br><br></span><span style="color: #660000;">$factory</span><span style="color: black;">-&gt;defineAs(App\Employees::</span><strong><span style="color: navy;">class</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'midle_menager'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(Faker\Generator </span><span style="color: #660000;">$faker</span><span style="color: black;">) {<br></span><span style="color: #660000;">$faker </span><span style="color: black;">= \Faker\Factory::<em>create</em>(</span><strong><span style="color: green;">'ru_RU'</span></strong><span style="color: black;">);<br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">[<br></span><strong><span style="color: green;">'name' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: navy;">name</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'parent_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: navy;">numberBetween</span></strong><span style="color: black;">(</span><span style="color: blue;">2</span><span style="color: black;">, </span><span style="color: blue;">3</span><span style="color: black;">),<br></span><strong><span style="color: green;">'position_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">3</span><span style="color: black;">,<br></span><strong><span style="color: green;">'date' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'img/midle_manager.jpg'<br></span></strong><span style="color: black;">];<br> });<br><br></span><span style="color: #660000;">$factory</span><span style="color: black;">-&gt;defineAs(App\Employees::</span><strong><span style="color: navy;">class</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'junior_menager'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(Faker\Generator </span><span style="color: #660000;">$faker</span><span style="color: black;">) {<br></span><span style="color: #660000;">$faker </span><span style="color: black;">= \Faker\Factory::<em>create</em>(</span><strong><span style="color: green;">'ru_RU'</span></strong><span style="color: black;">);<br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">[<br></span><strong><span style="color: green;">'name' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: navy;">name</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'parent_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: navy;">numberBetween</span></strong><span style="color: black;">(</span><span style="color: blue;">4</span><span style="color: black;">, </span><span style="color: blue;">7</span><span style="color: black;">),<br></span><strong><span style="color: green;">'position_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">4</span><span style="color: black;">,<br></span><strong><span style="color: green;">'date' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'img/jun_manager.jpg'<br></span></strong><span style="color: black;">];<br> });<br><br></span><span style="color: #660000;">$factory</span><span style="color: black;">-&gt;defineAs(App\Employees::</span><strong><span style="color: navy;">class</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'common_employee'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(Faker\Generator </span><span style="color: #660000;">$faker</span><span style="color: black;">) {<br></span><span style="color: #660000;">$faker </span><span style="color: black;">= \Faker\Factory::<em>create</em>(</span><strong><span style="color: green;">'ru_RU'</span></strong><span style="color: black;">);<br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">[<br></span><strong><span style="color: green;">'name' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: navy;">name</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'parent_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: navy;">numberBetween</span></strong><span style="color: black;">(</span><span style="color: blue;">12</span><span style="color: black;">, </span><span style="color: blue;">17</span><span style="color: black;">),<br></span><strong><span style="color: green;">'position_id' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">5</span><span style="color: black;">,<br></span><strong><span style="color: green;">'date' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$faker</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'img/common.jpg'<br></span></strong><span style="color: black;">];<br> });</span><span style="color: black;"></span>
	</p>
</div>
<p>Заполнение таблицы должностей с зарплатами.
</p>
<div>
	<p><span style="color: black;">DB</span><span style="color: black;">::</span><em><span style="color: black;">table</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">position</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">)-&gt;</span><span style="color: black;">insert</span><span style="color: black;">(</span><strong><span style="color: navy;">array</span></strong><span style="color: black;">(<br></span><strong><span style="color: navy;">array</span></strong><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">position</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'Генеральный директор'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">salary</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">120000</span><span style="color: black;">),<br></span><strong><span style="color: navy;">array</span></strong><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">position</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'Менеджер выс. звена'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">salary</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">100000</span><span style="color: black;">),<br></span><strong><span style="color: navy;">array</span></strong><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">position</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'Менеджер сред. звена'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">salary</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">70000</span><span style="color: black;">),<br></span><strong><span style="color: navy;">array</span></strong><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">position</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'Менеджер нижн. звена'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">salary</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">40000</span><span style="color: black;">),<br></span><strong><span style="color: navy;">array</span></strong><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">position</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'Рядовой сотрудник'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">salary</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">20000</span><span style="color: black;">),<br> ));</span><span style="color: black;"></span>
	</p>
</div>
<p>Выполняем загрузку начальных данных, заполняем класс <span style="color: #f4645f;">DatabaseSeeder</span><span style="color: #565656;">.</span>
</p>
<p><span style="color: #565656;"></span>
</p>
<div>
	<p><span style="color: #660000;">$this</span><span style="color: black;">-&gt;call(EmployeesTableSeeder::</span><strong><span style="color: navy;">class</span></strong><span style="color: black;">);<br></span><span style="color: #660000;">$this</span><span style="color: black;">-&gt;call(UsersTableSeeder::</span><strong><span style="color: navy;">class</span></strong><span style="color: black;">);<br></span><span style="color: #660000;">$this</span><span style="color: black;">-&gt;call(PositionTableSeeder::</span><strong><span style="color: navy;">class</span></strong><span style="color: black;">);</span><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: #565656;"></span>
</p>
<p><span style="color: black;">Производим выполнение загрузки начальных данных:</span>
</p>
<p><span style="color: white;">php artisan db</span><span style="color: white;">:</span><span style="color: white;">seed</span>
</p>
<p><span style="color: black;"></span>
</p>
<p><strong><span style="color: black;">1.<span style="font-weight: normal;"></span></span></strong><strong><span style="color: black;">Использование Twitter Bootstrap для создания базовых стилей страницы.</span></strong>
</p>
<p style="margin-right: 0cm; margin-left: 18pt;"><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt;"><span style="color: black;">Используем команду </span><span style="color: black;">npm</span><span style="color: black;"> </span><span style="color: black;">install</span><span style="color: black;"> в терминале для загрузки пакетов.</span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt;"><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt;"><span style="color: black;">Далее будем использовать </span><span style="color: black;">Laravel</span><span style="color: black;"> </span><span style="color: black;">Mix</span><span style="color: black;">.</span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt;"><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt;"><span style="color: black;">Производим сборку в режиме </span><span style="color: black;">development</span><span style="color: black;">: </span><span style="color: black;">npm</span><span style="color: black;"> </span><span style="color: black;">run</span><span style="color: black;"> </span><span style="color: black;">dev</span><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt;"><span style="color: black;"></span>
</p>
<div style="margin-left: 18pt; margin-right: 0cm;">
	<p style="text-align: justify;"><span style="color: black;">
		</span><span style="color: black;">Asset Size Chunks Chunk Names</span>
	</p>
	<p style="text-align: justify;"><span style="color: black;"> fonts/vendor/bootstrap-sass/bootstrap/glyphicons-halflings-regular.eot?f4769f9bdb7466be65088239c12046d1 20.1 kB [emitted]</span>
	</p>
	<p style="text-align: justify;"><span style="color: black;"> fonts/vendor/bootstrap-sass/bootstrap/glyphicons-halflings-regular.svg?89889688147bd7575d6327160d64e760 109 kB [emitted]</span>
	</p>
	<p style="text-align: justify;"><span style="color: black;"> fonts/vendor/bootstrap-sass/bootstrap/glyphicons-halflings-regular.ttf?e18bbf611f2a2e43afc071aa2f4e1512 45.4 kB [emitted]</span>
	</p>
	<p style="text-align: justify;"><span style="color: black;"> fonts/vendor/bootstrap-sass/bootstrap/glyphicons-halflings-regular.woff?fa2772327f55d8198301fdb8bcfc8158 23.4 kB [emitted]</span>
	</p>
	<p style="text-align: justify;"><span style="color: black;">fonts/vendor/bootstrap-sass/bootstrap/glyphicons-halflings-regular.woff2?448c34a56d699c29117adc64c43affeb 18 kB [emitted]</span>
	</p>
	<p style="text-align: justify;"><span style="color: black;"> /js/app.js 1.23 MB 0 [emitted] [big] /js/app</span>
	</p>
	<p style="text-align: justify;"><span style="color: black;"> /css/app.css 671 kB 0 [emitted] [big] /js/app</span>
	</p>
	<p style="text-align: justify;"><span style="color: black;"> mix</span><span style="color: black;">-</span><span style="color: black;">manifest</span><span style="color: black;">.</span><span style="color: black;">json</span><span style="color: black;"> 66 </span><span style="color: black;">bytes</span><span style="color: black;"> [</span><span style="color: black;">emitted</span><span style="color: black;">]</span>
	</p>
</div>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;">Далее создаем шаблон нашей страницы. Путь шаблона будет хранится в директории </span><span style="color: black;">layout</span><span style="color: black;"> под названием </span><span style="color: black;">master</span><span style="color: black;">.(</span><span style="color: black;">layout</span><span style="color: black;">/</span> <span style="color: black;">master</span><span style="color: black;">.</span><span style="color: black;">blade</span><span style="color: black;">.</span><span style="color: black;">php</span><span style="color: black;">). Шаблон будет взят с сайта </span><a href="http://www.bootstrap-3.ru/bootstraptheme.php" target="_blank" class="external" rel="nofollow">http://www.bootstrap-3.ru/bootstraptheme.php</a><span style="color: black;">.</span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;">Под</span><span style="color: black;"> </span><span style="color: black;">названием</span><span style="color: black;"> starter-template. </span><a href="http://www.bootstrap-3.ru/examples/starter-template/" target="_blank" class="external" rel="nofollow">http://www.bootstrap-3.ru/examples/starter-template/</a><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;">Подключаем в шаблоне файлы стилей и </span><span style="color: black;">javascript</span><span style="color: black;">. Которые были сгенерированы ранее.</span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;"></span>
</p>
<div>
	<p style="margin: 0cm 0cm 0pt 21pt;"><span style="color: black;">&lt;</span><strong><span style="color: navy;">link</span></strong><strong><span style="color: navy;">
		</span></strong><strong><span style="color: blue;">href</span></strong><strong><span style="color: blue;">=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: black;">asset</span><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">css</span></strong><strong><span style="color: green;">/</span></strong><strong><span style="color: green;">app</span></strong><strong><span style="color: green;">.</span></strong><strong><span style="color: green;">css</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">rel</span></strong><strong><span style="color: blue;">=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: green;">stylesheet</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span>
	</p>
	<p><span style="color: black;">&lt;</span><strong><span style="color: navy;">script </span></strong><strong><span style="color: blue;">src=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{asset(</span><strong><span style="color: green;">'js/app.js'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">script</span></strong><span style="color: black;">&gt;</span><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 42pt; text-align: justify;"><span style="color: black;">Шаблон для проекта готов к использованию. </span>
</p>
<p style="margin-right: 0cm; margin-left: 42pt; text-align: justify;"><span style="color: black;">Часть №1 (обязательная). Выводим список сотрудников в древовидной форме.</span>
</p>
<p style="margin-right: 0cm; margin-left: 42pt; text-align: justify;"><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;"></span>
</p>
<p><span style="color: black;">Создадим контроллер </span><span style="color: #1cade4;">EmployeesController</span><span style="color: black;"> который будет отвечать за работу с таблицей сотрудников.</span><span style="color: black;"></span>
</p>
<div>
	<p style="text-align: justify;"><span style="color: black;">php artisan make:controller EmployeesController –resource</span>
	</p>
</div>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;"></span>
</p>
<p style="text-align: justify;"><span style="color: black;"></span>
</p>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;">Метод </span><span style="color: #1cade4;">tree</span><span style="color: black;"> будет отвечать за отображение нашего иерархического списка. </span><span style="color: black;">Работа метода в данном случае, будет заключаться в получении данных из базы и формировании массива с нужной структурой.</span>
</p>
<p><span style="color: black;">Метод выборки из базы храним в модели </span><span style="color: #1cade4;">Employees</span><span style="color: black;">.</span><span style="color: black;"></span>
</p>
<div>
	<p><strong><span style="color: navy;">public function </span></strong><span style="color: black;">getEmployeesAll()<br> {<br></span><strong><span style="color: navy;">return<br></span></strong><span style="color: black;">DB::<em>table</em>(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">)<br></span><em><span style="color: gray;">// -&gt;where('id', '&gt;', '10')<br></span></em><span style="color: black;">-&gt;leftJoin(</span><strong><span style="color: green;">'position'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(</span><span style="color: #660000;">$query</span><span style="color: black;">) {<br></span><span style="color: #660000;">$query</span><span style="color: black;">-&gt;on(</span><strong><span style="color: green;">'position.id'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'='</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'employees.position_id'</span></strong><span style="color: black;">);<br> })<br> -&gt;select(</span><strong><span style="color: green;">'employees.*'</span></strong><span style="color: black;">, DB::<em>raw</em>(</span><strong><span style="color: green;">'position.position as position, </span></strong>
	</p>
	<p><strong><span style="color: green;"> position.salary as salary'</span></strong><span style="color: black;">))<br></span><em><span style="color: gray;">//-&gt;groupBy('employees.id')<br></span></em><span style="color: black;">-&gt;orderBy(</span><strong><span style="color: green;">'position'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)<br></span><em><span style="color: gray;">//-&gt;limit(5)<br></span></em><span style="color: black;">-&gt;get();<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p style="margin-right: 0cm; margin-left: 18pt; text-align: justify;"><span style="color: black;"></span>
</p>
<p><span style="color: black;">Метод</span><span style="color: black;"> </span><span style="color: #1cade4;">tree </span><span style="color: black;">котроллера</span><span style="color: black;"> </span><span style="color: #1cade4;">EmployeesController</span><span style="color: black;"></span>
</p>
<div>
	<p><strong><span style="color: navy;">public function </span></strong><span style="color: black;">tree(Employees </span><span style="color: #660000;">$employees</span><span style="color: black;">)<br> {<br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">view(</span><strong><span style="color: green;">'EmployeeTreeview.index'</span></strong><span style="color: black;">,[</span><strong><span style="color: green;">'tree'</span></strong><span style="color: black;">=&gt;</span><span style="color: #660000;">$this</span><span style="color: black;">- </span>
	</p>
	<p><span style="color: black;"></span><span style="color: black;">&gt;</span><span style="color: black;">makeArray</span><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">employees</span><span style="color: black;">-&gt;</span><span style="color: black;">getEmployeesAll</span><span style="color: black;">())]);<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: black;">Для формирования правильной структуры для дальнейшего использования и построения дерева используется метод </span><span style="color: #1cade4;">makeArray</span><span style="color: black;"></span>
</p>
<div>
	<p><strong><span style="color: navy;">private function </span></strong><span style="color: black;">makeArray(</span><span style="color: #660000;">$employees</span><span style="color: black;">){<br></span><span style="color: #660000;">$childs</span><span style="color: black;">=[];<br><br></span><strong><span style="color: navy;">foreach</span></strong><span style="color: black;">(</span><span style="color: #660000;">$employees </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$employee</span><span style="color: black;">){<br></span><span style="color: #660000;">$childs</span><span style="color: black;">[</span><span style="color: #660000;">$employee</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">parent_id</span></strong><span style="color: black;">][]=</span><span style="color: #660000;">$employee</span><span style="color: black;">;<br> }<br><br></span><strong><span style="color: navy;">foreach</span></strong><span style="color: black;">(</span><span style="color: #660000;">$employees </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$employee</span><span style="color: black;">){<br></span><strong><span style="color: navy;">if</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">isset</span></strong><span style="color: black;">(</span><span style="color: #660000;">$childs</span><span style="color: black;">[</span><span style="color: #660000;">$employee</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">]))<br></span><span style="color: #660000;">$employee</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">childs</span></strong><span style="color: black;">=</span><span style="color: #660000;">$childs</span><span style="color: black;">[</span><span style="color: #660000;">$employee</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">];<br><br> }<br></span><strong><span style="color: navy;">if</span></strong><span style="color: black;">(<em>count</em>(</span><span style="color: #660000;">$childs</span><span style="color: black;">)&gt;</span><span style="color: blue;">0</span><span style="color: black;">){<br></span><span style="color: #660000;">$tree</span><span style="color: black;">=</span><span style="color: #660000;">$childs</span><span style="color: black;">[</span><span style="color: blue;">0</span><span style="color: black;">];<br> }<br></span><strong><span style="color: navy;">else </span></strong><span style="color: black;">{<br></span><span style="color: #660000;">$tree</span><span style="color: black;">=[];<br> }<br></span><strong><span style="color: navy;">return </span></strong><span style="color: #660000;">$tree</span><span style="color: black;">;<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p style="text-align: justify;"><span style="color: black;"></span>
</p>
<p><span style="color: black;">Отредактируем наш вид</span><span style="color: black;"> </span><span style="color: black;">index</span><span style="color: black;">.</span><span style="color: black;">blade</span><span style="color: black;">.</span><span style="color: black;">php</span><span style="color: black;">. Он будет иметь след. вид:</span>
</p>
<p style="text-align: justify;"><span style="color: black;"></span>
</p>
<p style="text-align: justify;"><span style="color: black;"></span>
</p>
<div>
	<p><strong><span style="color: navy;">@</span></strong><strong><span style="color: navy;">extends</span></strong><strong><span style="color: navy;">(</span></strong><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">layout</span></strong><strong><span style="color: green;">.</span></strong><strong><span style="color: green;">master</span></strong><strong><span style="color: green;">'</span></strong><strong><span style="color: navy;">)<br> @</span></strong><strong><span style="color: navy;">section</span></strong><strong><span style="color: navy;">(</span></strong><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">content</span></strong><strong><span style="color: green;">'</span></strong><strong><span style="color: navy;">)<br></span></strong><span style="color: black;"> &lt;</span><strong><span style="color: navy;">h</span></strong><strong><span style="color: navy;">3 </span></strong><strong><span style="color: blue;">style</span></strong><strong><span style="color: blue;">=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">text</span></strong><strong><span style="color: blue;">-</span></strong><strong><span style="color: blue;">align</span></strong><span style="color: black;">: </span><strong><span style="color: green;">center</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Иерархия сотрудников&lt;/</span><strong><span style="color: navy;">h</span></strong><strong><span style="color: navy;">3</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">ul</span></strong><strong><span style="color: navy;">
		</span></strong><strong><span style="color: blue;">id</span></strong><strong><span style="color: blue;">=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: green;">tree</span></strong><strong><span style="color: green;">1"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@</span></strong><strong><span style="color: navy;">foreach</span></strong><strong><span style="color: navy;">(</span></strong><span style="color: #660000;">$</span><span style="color: #660000;">employees</span><span style="color: #660000;"> </span><strong><span style="color: navy;">as</span></strong><strong><span style="color: navy;"> </span></strong><span style="color: #660000;">$</span><span style="color: #660000;">empl</span><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">li</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{</span><span style="color: #660000;">$</span><span style="color: #660000;">empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name</span></strong><span style="color: black;">}}</span><span style="color: black;">, Должность: {{</span><span style="color: #660000;">$</span><span style="color: #660000;">empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><span style="color: black;">}}</span><span style="color: black;">, Приём: {{</span><span style="color: #660000;">$</span><span style="color: #660000;">empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date</span></strong><span style="color: black;">}}</span><span style="color: black;">, ЗП: {{</span><span style="color: #660000;">$</span><span style="color: #660000;">empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">salary</span></strong><span style="color: black;">}}<br><br></span><strong><span style="color: navy;">@</span></strong><strong><span style="color: navy;">if</span></strong><strong><span style="color: navy;">(</span></strong><strong><span style="color: navy;">isset</span></strong><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">childs</span></strong><span style="color: black;">)</span><strong><span style="color: navy;">)<br> @</span></strong><strong><span style="color: navy;">include</span></strong><strong><span style="color: navy;">(</span></strong><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">EmployeeTreeview</span></strong><strong><span style="color: green;">.</span></strong><strong><span style="color: green;">tree</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">,[</span><strong><span style="color: green;">"</span></strong><strong><span style="color: green;">childs</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">=&gt;</span><span style="color: #660000;">$</span><span style="color: #660000;">empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">childs</span></strong><span style="color: black;">]</span><strong><span style="color: navy;">)<br> @</span></strong><strong><span style="color: navy;">endif</span></strong><strong><span style="color: navy;"><br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">li</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@</span></strong><strong><span style="color: navy;">endforeach</span></strong><strong><span style="color: navy;"><br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">ul</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@</span></strong><strong><span style="color: navy;">endsection</span></strong><span style="color: black;"></span>
	</p>
</div>
<p style="text-align: justify;"><span style="color: black;">Если у руководителя есть подчиненные, то подключаем еще кусочек кода из файла </span><span style="color: black;">tree</span><span style="color: black;">.</span><span style="color: black;">blade</span><span style="color: black;">.</span><span style="color: black;">php</span><span style="color: black;">. Который примет следующий вид:</span>
</p>
<p style="text-align: justify;"><span style="color: black;"></span>
</p>
<div>
	<p><span style="color: black;">&lt;</span><strong><span style="color: navy;">ul</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@foreach(</span></strong><span style="color: #660000;">$childs </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$child</span><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">li</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{</span><span style="color: #660000;">$child</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name</span></strong><span style="color: black;">}}</span><span style="color: black;">, </span><span style="color: black;">Должность</span><span style="color: black;">: {{</span><span style="color: #660000;">$child</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><span style="color: black;">}}</span><span style="color: black;">, Приём: {{</span><span style="color: #660000;">$child</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date</span></strong><span style="color: black;">}}</span><span style="color: black;">, ЗП: {{</span><span style="color: #660000;">$child</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">salary</span></strong><span style="color: black;">}}<br></span><strong><span style="color: navy;">@if(isset</span></strong><span style="color: black;">(</span><span style="color: #660000;">$child</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">childs</span></strong><span style="color: black;">)</span><strong><span style="color: navy;">)<br> @include(</span></strong><strong><span style="color: green;">'EmployeeTreeview.tree'</span></strong><span style="color: black;">,[</span><strong><span style="color: green;">'childs'</span></strong><span style="color: black;">=&gt;</span><span style="color: #660000;">$child</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">childs</span></strong><span style="color: black;">]</span><strong><span style="color: navy;">)<br> @endif<br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">li</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endforeach<br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">ul</span></strong><span style="color: black;">&gt;</span><span style="color: black;"></span>
	</p>
</div>
<p style="text-align: justify;"><span style="color: black;"></span>
</p>
<p><span style="color: black;">Для корректного отображения необходимо подключить к проекту еще 2 файла. Файл стилей </span><span style="color: #1cade4;">treeview.css </span><span style="color: black;">и файл </span><span style="color: #1cade4;">treeview</span><span style="color: #1cade4;">.</span><span style="color: #1cade4;">js</span><span style="color: #1cade4;">.</span>
</p>
<p style="text-align: justify;"><span style="color: black;"></span>
</p>
<p style="text-align: justify;"><span style="color: black;">Файл стилей </span><span style="color: #1cade4;">treeview.css</span><span style="color: black;"></span>
</p>
<p style="text-align: justify;"><span style="color: black;"></span>
</p>
<div>
	<p><span style="color: black;">.</span><strong><span style="color: navy;">tree</span></strong><span style="color: black;">, .</span><strong><span style="color: navy;">tree ul </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">margin</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><span style="color: black;">;<br></span><strong><span style="color: blue;">padding</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><span style="color: black;">;<br></span><strong><span style="color: blue;">list-style</span></strong><span style="color: black;">:</span><strong><span style="color: green;">none<br></span></strong><span style="color: black;">}<br> .</span><strong><span style="color: navy;">tree ul </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">margin-left</span></strong><span style="color: black;">:</span><span style="color: blue;">1</span><strong><span style="color: green;">em</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">position</span></strong><span style="color: black;">:</span><strong><span style="color: green;">relative<br></span></strong><span style="color: black;">}<br> .</span><strong><span style="color: navy;">tree ul ul </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">margin-left</span></strong><span style="color: black;">:</span><span style="color: blue;">.5</span><strong><span style="color: green;">em<br></span></strong><span style="color: black;">}<br> .</span><strong><span style="color: navy;">tree ul</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">before </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">content</span></strong><span style="color: black;">:</span><strong><span style="color: green;">""</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">display</span></strong><span style="color: black;">:</span><strong><span style="color: green;">block</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">width</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><span style="color: black;">;<br></span><strong><span style="color: blue;">position</span></strong><span style="color: black;">:</span><strong><span style="color: green;">absolute</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">top</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><span style="color: black;">;<br></span><strong><span style="color: blue;">bottom</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><span style="color: black;">;<br></span><strong><span style="color: blue;">left</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><span style="color: black;">;<br></span><strong><span style="color: blue;">border-left</span></strong><span style="color: black;">:</span><span style="color: blue;">1</span><strong><span style="color: green;">px solid<br></span></strong><span style="color: black;">}<br> .</span><strong><span style="color: navy;">tree li </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">margin</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><span style="color: black;">;<br></span><strong><span style="color: blue;">padding</span></strong><span style="color: black;">:</span><span style="color: blue;">0 1</span><strong><span style="color: green;">em</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">line-height</span></strong><span style="color: black;">:</span><span style="color: blue;">2</span><strong><span style="color: green;">em</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">color</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">#369</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">font-weight</span></strong><span style="color: black;">:</span><span style="color: blue;">700</span><span style="color: black;">;<br></span><strong><span style="color: blue;">position</span></strong><span style="color: black;">:</span><strong><span style="color: green;">relative<br></span></strong><span style="color: black;">}<br> .</span><strong><span style="color: navy;">tree ul li</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">before </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">content</span></strong><span style="color: black;">:</span><strong><span style="color: green;">""</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">display</span></strong><span style="color: black;">:</span><strong><span style="color: green;">block</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">width</span></strong><span style="color: black;">:</span><span style="color: blue;">10</span><strong><span style="color: green;">px</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">height</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><span style="color: black;">;<br></span><strong><span style="color: blue;">border-top</span></strong><span style="color: black;">:</span><span style="color: blue;">1</span><strong><span style="color: green;">px solid</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">margin-top</span></strong><span style="color: black;">:-</span><span style="color: blue;">1</span><strong><span style="color: green;">px</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">position</span></strong><span style="color: black;">:</span><strong><span style="color: green;">absolute</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">top</span></strong><span style="color: black;">:</span><span style="color: blue;">1</span><strong><span style="color: green;">em</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">left</span></strong><span style="color: black;">:</span><span style="color: blue;">0<br></span><span style="color: black;">}<br> .</span><strong><span style="color: navy;">tree ul li</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">last-child</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">before </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">background</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">#fff</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">height</span></strong><span style="color: black;">:</span><strong><span style="color: green;">auto</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">top</span></strong><span style="color: black;">:</span><span style="color: blue;">1</span><strong><span style="color: green;">em</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">bottom</span></strong><span style="color: black;">:</span><span style="color: blue;">0<br></span><span style="color: black;">}<br> .</span><strong><span style="color: navy;">indicator </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">margin-right</span></strong><span style="color: black;">:</span><span style="color: blue;">5</span><strong><span style="color: green;">px</span></strong><span style="color: black;">;<br> }<br> .</span><strong><span style="color: navy;">tree li a </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">text-decoration</span></strong><span style="color: black;">: </span><strong><span style="color: green;">none</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">color</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">#369</span></strong><span style="color: black;">;<br> }<br> .</span><strong><span style="color: navy;">tree li button</span></strong><span style="color: black;">, .</span><strong><span style="color: navy;">tree li button</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">active</span></strong><span style="color: black;">, .</span><strong><span style="color: navy;">tree li button</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">focus </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">text-decoration</span></strong><span style="color: black;">: </span><strong><span style="color: green;">none</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">color</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">#369</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">border</span></strong><span style="color: black;">:</span><strong><span style="color: green;">none</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">background</span></strong><span style="color: black;">:</span><strong><span style="color: green;">transparent</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">margin</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><strong><span style="color: green;">px </span></strong><span style="color: blue;">0</span><strong><span style="color: green;">px </span></strong><span style="color: blue;">0</span><strong><span style="color: green;">px </span></strong><span style="color: blue;">0</span><strong><span style="color: green;">px</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">padding</span></strong><span style="color: black;">:</span><span style="color: blue;">0</span><strong><span style="color: green;">px </span></strong><span style="color: blue;">0</span><strong><span style="color: green;">px </span></strong><span style="color: blue;">0</span><strong><span style="color: green;">px </span></strong><span style="color: blue;">0</span><strong><span style="color: green;">px</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">outline</span></strong><span style="color: black;">: </span><span style="color: blue;">0</span><span style="color: black;">;<br> }</span>
	</p>
</div>
<p style="text-align: justify;"><span style="color: black;"></span>
</p>
<p style="text-align: justify;"><span style="color: black;">Файл</span><span style="color: black;"> </span><span style="color: #1cade4;">treeview.js.</span><span style="color: black;"></span>
</p>
<div>
	<p><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">.</span><strong><span style="color: #660e7a;">fn</span></strong><span style="color: black;">.</span><span style="color: #7a7a43;">extend</span><span style="color: black;">({<br></span><span style="color: #7a7a43;">treed</span><span style="color: black;">: </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(o) {<br><br></span><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">openedClass </span><span style="color: black;">= </span><strong><span style="color: green;">'glyphicon-minus-sign'</span></strong><span style="color: black;">;<br></span><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">closedClass </span><span style="color: black;">= </span><strong><span style="color: green;">'glyphicon-plus-sign'</span></strong><span style="color: black;">;<br><br></span><strong><span style="color: navy;">if </span></strong><span style="color: black;">(</span><strong><span style="color: navy;">typeof </span></strong><span style="color: black;">o != </span><strong><span style="color: green;">'undefined'</span></strong><span style="color: black;">){<br></span><strong><span style="color: navy;">if </span></strong><span style="color: black;">(</span><strong><span style="color: navy;">typeof </span></strong><span style="color: black;">o.openedClass != </span><strong><span style="color: green;">'undefined'</span></strong><span style="color: black;">){<br></span><span style="color: #458383;">openedClass </span><span style="color: black;">= o.openedClass;<br> }<br></span><strong><span style="color: navy;">if </span></strong><span style="color: black;">(</span><strong><span style="color: navy;">typeof </span></strong><span style="color: black;">o.closedClass != </span><strong><span style="color: green;">'undefined'</span></strong><span style="color: black;">){<br></span><span style="color: #458383;">closedClass </span><span style="color: black;">= o.closedClass;<br> }<br> };<br><br></span><em><span style="color: gray;">//initialize each of the top levels<br></span></em><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">tree </span><span style="color: black;">= </span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">);<br></span><span style="color: #458383;">tree</span><span style="color: black;">.</span><span style="color: #7a7a43;">addClass</span><span style="color: black;">(</span><strong><span style="color: green;">"tree"</span></strong><span style="color: black;">);<br></span><span style="color: #458383;">tree</span><span style="color: black;">.</span><span style="color: #7a7a43;">find</span><span style="color: black;">(</span><strong><span style="color: green;">'li'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">has</span><span style="color: black;">(</span><strong><span style="color: green;">"ul"</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">each</span><span style="color: black;">(</span><strong><span style="color: navy;">function </span></strong><span style="color: black;">() {<br></span><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">branch </span><span style="color: black;">= </span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">); </span><em><span style="color: gray;">//li with children ul<br></span></em><span style="color: #458383;">branch</span><span style="color: black;">.</span><span style="color: #7a7a43;">prepend</span><span style="color: black;">(</span><strong><span style="color: green;">"&lt;i class='indicator glyphicon " </span></strong><span style="color: black;">+ </span><span style="color: #458383;">closedClass </span><span style="color: black;">+ </span><strong><span style="color: green;">"'&gt;&lt;/i&gt;"</span></strong><span style="color: black;">);<br></span><span style="color: #458383;">branch</span><span style="color: black;">.</span><span style="color: #7a7a43;">addClass</span><span style="color: black;">(</span><strong><span style="color: green;">'branch'</span></strong><span style="color: black;">);<br></span><span style="color: #458383;">branch</span><span style="color: black;">.</span><span style="color: #7a7a43;">on</span><span style="color: black;">(</span><strong><span style="color: green;">'click'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(e) {<br></span><strong><span style="color: navy;">if </span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this </span></strong><span style="color: black;">== e.</span><strong><span style="color: #660e7a;">target</span></strong><span style="color: black;">) {<br></span><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">icon </span><span style="color: black;">= </span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">children</span><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: navy;">i</span></strong><strong><span style="color: green;">:first'</span></strong><span style="color: black;">);<br></span><span style="color: #458383;">icon</span><span style="color: black;">.</span><span style="color: #7a7a43;">toggleClass</span><span style="color: black;">(</span><span style="color: #458383;">openedClass </span><span style="color: black;">+ </span><strong><span style="color: green;">" " </span></strong><span style="color: black;">+ </span><span style="color: #458383;">closedClass</span><span style="color: black;">);<br></span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">children</span><span style="color: black;">().</span><span style="color: #7a7a43;">children</span><span style="color: black;">().</span><span style="color: #7a7a43;">toggle</span><span style="color: black;">();<br> }<br> })<br></span><span style="color: #458383;">branch</span><span style="color: black;">.</span><span style="color: #7a7a43;">children</span><span style="color: black;">().</span><span style="color: #7a7a43;">children</span><span style="color: black;">().</span><span style="color: #7a7a43;">toggle</span><span style="color: black;">();<br> });<br></span><em><span style="color: gray;">//fire event from the dynamically added icon<br></span></em><span style="color: #458383;">tree</span><span style="color: black;">.</span><span style="color: #7a7a43;">find</span><span style="color: black;">(</span><strong><span style="color: green;">'.branch .indicator'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">each</span><span style="color: black;">(</span><strong><span style="color: navy;">function</span></strong><span style="color: black;">(){<br></span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">on</span><span style="color: black;">(</span><strong><span style="color: green;">'click'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">() {<br></span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">closest</span><span style="color: black;">(</span><strong><span style="color: green;">'li'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">click</span><span style="color: black;">();<br> });<br> });<br></span><em><span style="color: gray;">//fire event to open branch if the li contains an anchor instead of text<br></span></em><span style="color: #458383;">tree</span><span style="color: black;">.</span><span style="color: #7a7a43;">find</span><span style="color: black;">(</span><strong><span style="color: green;">'.branch&gt;a'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">each</span><span style="color: black;">(</span><strong><span style="color: navy;">function </span></strong><span style="color: black;">() {<br></span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">on</span><span style="color: black;">(</span><strong><span style="color: green;">'click'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(e) {<br></span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">closest</span><span style="color: black;">(</span><strong><span style="color: green;">'li'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">click</span><span style="color: black;">();<br> e.</span><span style="color: #7a7a43;">preventDefault</span><span style="color: black;">();<br> });<br> });<br></span><em><span style="color: gray;">//fire event to open branch if the li contains a button instead of text<br></span></em><span style="color: #458383;">tree</span><span style="color: black;">.</span><span style="color: #7a7a43;">find</span><span style="color: black;">(</span><strong><span style="color: green;">'.branch&gt;button'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">each</span><span style="color: black;">(</span><strong><span style="color: navy;">function </span></strong><span style="color: black;">() {<br></span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">on</span><span style="color: black;">(</span><strong><span style="color: green;">'click'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(e) {<br></span><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">closest</span><span style="color: black;">(</span><strong><span style="color: green;">'li'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">click</span><span style="color: black;">();<br> e.</span><span style="color: #7a7a43;">preventDefault</span><span style="color: black;">();<br> });<br> });<br> }<br> });<br><br></span><em><span style="color: gray;">//Initialization of treeviews<br><br></span></em><strong><span style="color: #660e7a;">$</span></strong><span style="color: black;">(</span><strong><span style="color: green;">'#tree1'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">treed</span><span style="color: black;">();</span>
	</p>
</div>
<p>Получаем древовидный список всех сотрудников компании. <img src="https://word-to-html.ruhttps/word-to-html.ru/file/C/Users/8523~1/AppData/Local/Temp/msohtmlclip1/01/clip_image002.png" alt="">
</p>
<p>Рисунок 1. Скриншот древовидного списка сотрудников.
</p>
<p><span style="color: #192d3a;">Задание №4, 5. </span>Создайте еще одну страницу и выведите на ней список сотрудников со всей имеющейся о сотруднике информацией из базы данных и возможностью сортировать по любому полю. Добавьте возможность поиска сотрудников по любому полю для страницы созданной в задаче 4.
</p>
<p>В контроллере <span style="color: #1cade4;">EmployeesController</span><span style="color: #1cade4;">
	</span>создадим метод <span style="color: #1cade4;">index</span><span style="color: #1cade4;"></span>
</p>
<p>Данные метод будет отвечать за отображение списка сотрудников с имеющейся информацией о сотруднике.
</p>
<div>
	<p><strong><span style="color: navy;">public function </span></strong><span style="color: black;">index(Request </span><span style="color: #660000;">$request</span><span style="color: black;">)<br> {<br></span><strong><span style="color: navy;">if</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">isset</span></strong><span style="color: black;">(</span><span style="color: #660000;">$request</span><span style="color: black;">)) {<br></span><span style="color: #660000;">$field </span><span style="color: black;">= </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;get(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">) != </span><strong><span style="color: green;">'' </span></strong><span style="color: black;">? </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;get(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">) : </span><strong><span style="color: green;">'id'</span></strong><span style="color: black;">;<br></span><span style="color: #660000;">$sort </span><span style="color: black;">= </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">) != </span><strong><span style="color: green;">'' </span></strong><span style="color: black;">? </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">) : </span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">;<br></span><span style="color: #660000;">$search </span><span style="color: black;">= </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;get(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">);<br> }<br></span><strong><span style="color: navy;">else </span></strong><span style="color: black;">{<br></span><span style="color: #660000;">$field </span><span style="color: black;">= </span><strong><span style="color: green;">"id"</span></strong><span style="color: black;">; </span><span style="color: #660000;">$sort </span><span style="color: black;">= </span><strong><span style="color: green;">"asc"</span></strong><span style="color: black;">;<br> }<br><br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">view(</span><strong><span style="color: green;">'employees.index'</span></strong><span style="color: black;">, [</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">=&gt;Employees::<em>getEmployees</em>(</span><span style="color: #660000;">$sort</span><span style="color: black;">, </span><span style="color: #660000;">$field</span><span style="color: black;">, </span><span style="color: #660000;">$search</span><span style="color: black;">)]);<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p>В модели <span style="color: black;">Employees</span><span style="color: black;"> </span>создаем метод <em><span style="color: black;">getEmployees</span></em>. Метод будет производить выборку из базы данных с параметрами для сортировки по полям, а также с возможностью поиска сотрудника.
</p>
<div>
	<p><strong><span style="color: navy;">static public function </span></strong><span style="color: black;">getEmployees(</span><span style="color: #660000;">$order </span><span style="color: black;">= </span><strong><span style="color: green;">"asc"</span></strong><span style="color: black;">, </span><span style="color: #660000;">$name </span><span style="color: black;">= </span><strong><span style="color: green;">"id"</span></strong><span style="color: black;">, </span><span style="color: #660000;">$search</span><span style="color: black;">=</span><strong><span style="color: green;">""</span></strong><span style="color: black;">)<br> {<br></span><strong><span style="color: navy;">return<br></span></strong><span style="color: black;">DB::<em>table</em>(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">)<br> -&gt;where(</span><strong><span style="color: green;">"name"</span></strong><span style="color: black;">, </span><strong><span style="color: green;">"like"</span></strong><span style="color: black;">,</span><strong><span style="color: green;">"%"</span></strong><span style="color: black;">.</span><span style="color: #660000;">$search</span><span style="color: black;">.</span><strong><span style="color: green;">"%"</span></strong><span style="color: black;">)<br> -&gt;orWhere(</span><strong><span style="color: green;">"position"</span></strong><span style="color: black;">, </span><strong><span style="color: green;">"like"</span></strong><span style="color: black;">,</span><strong><span style="color: green;">"%"</span></strong><span style="color: black;">.</span><span style="color: #660000;">$search</span><span style="color: black;">.</span><strong><span style="color: green;">"%"</span></strong><span style="color: black;">)<br> -&gt;orWhere(</span><strong><span style="color: green;">"date"</span></strong><span style="color: black;">, </span><strong><span style="color: green;">"like"</span></strong><span style="color: black;">,</span><strong><span style="color: green;">"%"</span></strong><span style="color: black;">.</span><span style="color: #660000;">$search</span><span style="color: black;">.</span><strong><span style="color: green;">"%"</span></strong><span style="color: black;">)<br> -&gt;orWhere(</span><strong><span style="color: green;">"salary"</span></strong><span style="color: black;">, </span><strong><span style="color: green;">"like"</span></strong><span style="color: black;">,</span><strong><span style="color: green;">"%"</span></strong><span style="color: black;">.</span><span style="color: #660000;">$search</span><span style="color: black;">.</span><strong><span style="color: green;">"%"</span></strong><span style="color: black;">)<br> -&gt;leftJoin(</span><strong><span style="color: green;">'position'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(</span><span style="color: #660000;">$query</span><span style="color: black;">) {<br></span><span style="color: #660000;">$query</span><span style="color: black;">-&gt;on(</span><strong><span style="color: green;">'position.id'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'='</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'employees.position_id'</span></strong><span style="color: black;">);<br> })<br> -&gt;select(</span><strong><span style="color: green;">'employees.*'</span></strong><span style="color: black;">, DB::<em>raw</em>(</span><strong><span style="color: green;">'position.position as position, position.salary as salary'</span></strong><span style="color: black;">))<br> -&gt;orderBy(</span><span style="color: #660000;">$name</span><span style="color: black;">, </span><span style="color: #660000;">$order</span><span style="color: black;">)<br> -&gt;paginate(</span><span style="color: blue;">30</span><span style="color: black;">);<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p>Создаем
вид index.dlade.php в каталоге 
	<strong><span style="color: green;">employees.</span></strong>
</p>
<div>
	<p><strong><span style="color: navy;">@extends(</span></strong><strong><span style="color: green;">'layout.master'</span></strong><strong><span style="color: navy;">)<br><br> @section(</span></strong><strong><span style="color: green;">'content'</span></strong><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">h3 </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">text-align</span></strong><span style="color: black;">: </span><strong><span style="color: green;">center"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Список сотрудников фирмы&lt;/</span><strong><span style="color: navy;">h3</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{--*** Блок поиска на сайте по табице Employees ***--}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"row"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">form </span></strong><strong><span style="color: blue;">action=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{action(</span><strong><span style="color: green;">'EmployeesController@index'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">method=</span></strong><strong><span style="color: green;">"get"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-sm-6 col-md-4 pull-right"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"input-group"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"text" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-control" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"search" </span></strong><strong><span style="color: blue;">placeholder=</span></strong><strong><span style="color: green;">"Поиск..."</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"hidden" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"field"</span></strong><span style="color: black;">/&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"hidden" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"sort"</span></strong><span style="color: black;">/&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">span </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"input-group-btn"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">button </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-primary" </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"submit"</span></strong><span style="color: black;">&gt;&lt;</span><strong><span style="color: navy;">i </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"glyphicon glyphicon-search"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">i</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">button</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><em><span style="color: gray;">&lt;!-- /input-group --&gt;<br></span></em><span style="color: black;">&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><em><span style="color: gray;">&lt;!-- /.col-lg-6 --&gt;<br></span></em><span style="color: black;">&lt;/</span><strong><span style="color: navy;">form</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- ********************************************** --}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">br </span></strong><span style="color: black;">/&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- Отоброжаем таблицу всех сотрудников с возможностью сортировки по полям --}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">table </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"table"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">thead</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"info"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- Реализуем сортировки по полям: ID, NAME, Position, DATE, Salary --}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">scope=</span></strong><strong><span style="color: green;">"col"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- Сортировка по полю ID. Работает по умолчанию --}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">?page=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'page'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&search=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&field=id&sort=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'desc'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">ID&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{request(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'id'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'id'</span></strong><span style="color: black;">?(request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'▴'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'▾'</span></strong><span style="color: black;">):</span><strong><span style="color: green;">''</span></strong><span style="color: black;">}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">scope=</span></strong><strong><span style="color: green;">"col"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- Сортировка по полю NAME.--}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">?page=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'page'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&search=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&field=name&sort=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'desc'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Ф.И.О.&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{request(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'name'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'name'</span></strong><span style="color: black;">?(request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'▴'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'▾'</span></strong><span style="color: black;">):</span><strong><span style="color: green;">''</span></strong><span style="color: black;">}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">scope=</span></strong><strong><span style="color: green;">"col"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- Сортировка по полю Position(Должность).--}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">?page=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'page'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&search=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&field=position&sort=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'desc'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Должность&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{request(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'position'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'position'</span></strong><span style="color: black;">?(request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'▴'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'▾'</span></strong><span style="color: black;">):</span><strong><span style="color: green;">''</span></strong><span style="color: black;">}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">scope=</span></strong><strong><span style="color: green;">"col"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- Сортировка по полю Date(Дата приема).--}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">?page=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'page'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&search=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&field=date&sort=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'desc'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Дата приема&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{request(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'date'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'date'</span></strong><span style="color: black;">?(request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'▴'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'▾'</span></strong><span style="color: black;">):</span><strong><span style="color: green;">''</span></strong><span style="color: black;">}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">scope=</span></strong><strong><span style="color: green;">"col"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- Сортировка по полю Salary(Уровень заработной платы).--}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">?page=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'page'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&search=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">&field=salary&sort=</span></strong><span style="color: black;">{{request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'desc'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Уровень ЗП &lt;</span><strong><span style="color: navy;">i </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"glyphicon glyphicon-ruble"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">i</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{request(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'salary'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'salary'</span></strong><span style="color: black;">?(request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'▴'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'▾'</span></strong><span style="color: black;">):</span><strong><span style="color: green;">''</span></strong><span style="color: black;">}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">thead</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tbody</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@foreach (</span></strong><span style="color: #660000;">$employees </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$empl</span><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">scope=</span></strong><strong><span style="color: green;">"row"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id </span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name </span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position </span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date </span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">salary </span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endforeach<br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">tbody</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">table</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br></span><em><span style="color: gray;">{{-- ..... Постраничная навигация ..... --}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">nav </span></strong><strong><span style="color: blue;">aria-label=</span></strong><strong><span style="color: green;">"Page navigation" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"text-center"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{ </span><span style="color: #660000;">$employees</span><span style="color: black;">-&gt;appends(</span><strong><span style="color: navy;">array</span></strong><span style="color: black;">(</span><strong><span style="color: green;">'search' </span></strong><span style="color: black;">=&gt; request(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">), </span><strong><span style="color: green;">'sort' </span></strong><span style="color: black;">=&gt; request(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">), </span><strong><span style="color: green;">'field' </span></strong><span style="color: black;">=&gt; request(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">)))-&gt;links() }}<br></span><em><span style="color: gray;">{{-- @else {{ $employees-&gt;links() }} --}}<br><br></span></em><span style="color: black;">&lt;/</span><strong><span style="color: navy;">nav</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br></span><strong><span style="color: navy;">@endsection</span></strong><span style="color: black;"></span>
	</p>
</div>
<p>Задание № 6 перенесено в ajax crud операции. Задание 8, 9.
</p>
<p>Задание 7. Используя стандартные функции Laravel / Symfony, осуществите аутентификацию пользователя для раздела веб сайта доступного только для зарегистрированных пользователей.
</p>
<p>В терминале производим команду <strong><span style="color: black;">php</span></strong><span style="color: black;"> </span><span style="color: black;">artisan</span><span style="color: black;"> </span><span style="color: black;">make</span><span style="color: black;">:</span><span style="color: black;">auth</span><span style="color: black;"></span>
</p>
<p>Данная команда сгенерирует необходимые классы и вид для аутентификации и регистрации пользователя. На начальном этапе мы уже создали одного пользователя при создании миграций.
</p>
<div>
	<p><span style="color: #660000;">$factory</span><span style="color: black;">-&gt;define(App\User::</span><strong><span style="color: navy;">class</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">() {<br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">[<br></span><strong><span style="color: green;">'name' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'Доценко А. В.'</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'email' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'<a href="mailto:admin@laravel.net" class="mailto">admin@laravel.net</a>'</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'password' </span></strong><span style="color: black;">=&gt; bcrypt(</span><strong><span style="color: green;">'qazwsx1027'</span></strong><span style="color: black;">),<br></span><strong><span style="color: green;">'remember_token' </span></strong><span style="color: black;">=&gt; str_random(</span><span style="color: blue;">10</span><span style="color: black;">),<br> ];<br> });</span><span style="color: black;"></span>
	</p>
</div>
<p>Пользователь с именем <strong><span style="color: green;">'</span></strong><strong><span style="color: green;">admin</span></strong><strong><span style="color: green;">@</span></strong><strong><span style="color: green;">laravel</span></strong><strong><span style="color: green;">.</span></strong><strong><span style="color: green;">net</span></strong><strong><span style="color: green;">'</span></strong> находится в базе данных в таблице Users.
</p>
<p>Задачи 6, 8, 9. Crud оперции над таблицей сотрудники используя ajax.
</p>
<p>Задание 6. Добавьте возможность сортировать (и искать если Вы выполнили задачу No5) по любому полю без перезагрузки страницы, например используя ajax.
</p>
<p>Задание 8. Перенесите функционал разработанный в задачах 4, 5 и 6 (используя ajax запросы) в раздел доступный только для зарегистрированных пользователей.
</p>
<p>Задание 9. В разделе доступном только для зарегистрированных пользователей, реализуйте остальные CRUD операции для записей сотрудников. Пожалуйста заметьте, что все поля касающиеся пользователей должны быть редактируемыми, включая начальника каждого сотрудника.
</p>
<p>Создадим необходимые маршруты в файле web.php
</p>
<p><span style="color: black;">Route</span><span style="color: black;">::</span><em><span style="color: black;">group</span></em><span style="color: black;">([</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">prefix</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">=&gt;</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">ajaxemployees</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">middleware</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">auth</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">], </span><strong><span style="color: navy;">function</span></strong><span style="color: black;">(){<br></span><span style="color: black;">Route</span><span style="color: black;">::</span><em><span style="color: black;">get</span></em><span style="color: black;">(</span><strong><span style="color: green;">'/'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">AjaxEmployeeController</span></strong><strong><span style="color: green;">@</span></strong><strong><span style="color: green;">index</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">);</span><em><span style="color: gray;">//</span></em><em><span style="color: gray;">C</span></em><em><span style="color: gray;">писок всех сотрудников<br> ////////////////////////<br></span></em><span style="color: black;">Route</span><span style="color: black;">::</span><em><span style="color: black;">match</span></em><span style="color: black;">([</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">get</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">put</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">], </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">edit</span></strong><strong><span style="color: green;">/{</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">}'</span></strong><span style="color: black;">, </span>
</p>
<p><strong><span style="color: green;">AjaxEmployeeController</span></strong><strong><span style="color: green;">@</span></strong><strong><span style="color: green;">edit</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">);</span><em><span style="color: gray;">//Обновляем информацию о сотруднике</span></em>
</p>
<p><em><span style="color: gray;">//Добовляем сотрудника в базу<br></span></em><span style="color: black;">Route</span><span style="color: black;">::</span><em><span style="color: black;">match</span></em><span style="color: black;">([</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">get</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">post</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">], </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">create</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">AjaxEmployeeController</span></strong><strong><span style="color: green;">@</span></strong><strong><span style="color: green;">create</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">); </span>
</p>
<p><em><span style="color: gray;">//Инфо о конкретном сотруднике<br></span></em><span style="color: black;">Route</span><span style="color: black;">::</span><em><span style="color: black;">get</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">show</span></strong><strong><span style="color: green;">/{</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">}'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">AjaxEmployeeController</span></strong><strong><span style="color: green;">@</span></strong><strong><span style="color: green;">show</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">);</span><em><span style="color: gray;"> </span></em>
</p>
<p><em><span style="color: gray;">//Удаляем сотрудника из базы<br></span></em><span style="color: black;">Route</span><span style="color: black;">::</span><em><span style="color: black;">delete</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">delete</span></strong><strong><span style="color: green;">/{</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">}'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">AjaxEmployeeController</span></strong><strong><span style="color: green;">@</span></strong><strong><span style="color: green;">destroy</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">);</span><em><span style="color: gray;"> <br> ////////////////////////<br></span></em><span style="color: black;">Route</span><span style="color: black;">::</span><em><span style="color: black;">get</span></em><span style="color: black;">(</span><strong><span style="color: green;">'/</span></strong><strong><span style="color: green;">changeselect</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">AjaxEmployeeController</span></strong><strong><span style="color: green;">@</span></strong><strong><span style="color: green;">change</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">);</span><em><span style="color: gray;">//Изменяем </span></em><em><span style="color: gray;">select</span></em><em><span style="color: gray;">, начальник по подчененности<br></span></em><span style="color: black;">});</span><span style="color: black;"></span>
</p>
<p>Таким образом если переходить по url <strong><span style="color: green;">'</span></strong><strong><span style="color: green;">ajaxemployees</span></strong><strong><span style="color: green;">' </span></strong>то для просмотра списка сотрудников и для выполнения необходимых crud операций необходимо будет авторизироватся на сайте.
</p>
<p>Создаем контроллер <strong><span style="color: green;">AjaxEmployeeController</span></strong><strong><span style="color: green;">. </span></strong>Данный контроллер будет отвечать за выполнение необходимых круд операций над сотрудниками фирмы. Будет осуществлять возможность отображения списка сотрудников, просмотр полной информации о конкретном сотруднике с указанием его начальника, редактирование информации о сотруднике с возможностью менять начальника, удаление сотрудника. При удалении сотрудника его подчиненные будут распределены другому начальнику такого же ранга или выше.
</p>
<p>В терминале вводим команду <strong><span style="color: #27ced7;">php artisan make</span></strong><strong><span style="color: #27ced7;">:</span></strong><strong><span style="color: #27ced7;">controller</span></strong><strong><span style="color: #27ced7;"> </span></strong><strong><span style="color: #27ced7;">AjaxEmployeeController -–resourse</span></strong><span style="color: black;">. </span>Команда автоматически создаст контроллер, а также необходимые методы для работы.
</p>
<p>Далее в контроллере <span style="color: #1cade4;">AjaxEmployeeController</span><span style="color: #1cade4;"> </span>создадим метод index. Необходим он будет для отображения списка сотрудников. А также для выполнения сортировок и поиска сотрудников используя ajax запросы.Метод <span style="color: #1cade4;">index</span><span style="color: #1cade4;"> </span>будет иметь следующий вид:
</p>
<div>
	<p><strong><span style="color: navy;">public function </span></strong><span style="color: black;">index(Request </span><span style="color: #660000;">$request</span><span style="color: black;">)<br> {<br></span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()-&gt;put(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">, </span><span style="color: #660000;">$request<br></span><span style="color: black;">-&gt;has(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">) ? </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;get(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">) : (</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()<br> -&gt;has(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">) ? </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()-&gt;get(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">''</span></strong><span style="color: black;">) : </span><strong><span style="color: green;">""</span></strong><span style="color: black;">));<br></span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()-&gt;put(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">, </span><span style="color: #660000;">$request<br></span><span style="color: black;">-&gt;has(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">) ? </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;get(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">) : (</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()<br> -&gt;has(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">) ? </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()-&gt;get(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">) : </span><strong><span style="color: green;">'name'</span></strong><span style="color: black;">));<br></span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()-&gt;put(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">, </span><span style="color: #660000;">$request<br></span><span style="color: black;">-&gt;has(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">) ? </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">) : (</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()<br> -&gt;has(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">) ? </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">) : </span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">));<br><br></span><em><span style="color: gray;">/** Выбираем всех сотрудников из таблицы employees,<br> * и подставляем данные переданные через AJAX<br> */<br></span></em><span style="color: #660000;">$employees </span><span style="color: black;">= Employees::<em>getEmployees</em>(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">),<br></span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()-&gt;get(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">), </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;session()-&gt;get(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">));<br><br></span><strong><span style="color: navy;">if </span></strong><span style="color: black;">(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;ajax()) {</span>
	</p>
	<p><em><span style="color: gray;">//Если были переданны по средствам ajax, передаем данные с параметрами сотрировки или поиска<br></span></em><strong><span style="color: navy;">return </span></strong><span style="color: black;">view(</span><strong><span style="color: green;">'ajaxCrud.index'</span></strong><span style="color: black;">, <em>compact</em>(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">));<br> } </span><strong><span style="color: navy;">else </span></strong><span style="color: black;">{ </span>
	</p>
	<p><span style="color: black;"></span><em><span style="color: gray;">//Иначе отправляем данные с параметрами по умолчанию при авторизации<br></span></em><strong><span style="color: navy;">return </span></strong><span style="color: black;">view(</span><strong><span style="color: green;">'ajaxCrud.ajax'</span></strong><span style="color: black;">, <em>compact</em>(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">));<br> }<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: black;"></span>
</p>
<p><span style="color: #192d3a;">Необходимо создать каталог </span><strong><span style="color: green;">ajaxCrud</span></strong><strong><span style="color: green;"> </span></strong><span style="color: #192d3a;">который будет содержать необходимые файлы видов.</span>
</p>
<p><span style="color: #192d3a;">Создаем вид по умолчанию </span><span style="color: #1cade4;">ajax</span><span style="color: #1cade4;">.</span><span style="color: #1cade4;">dlade</span><span style="color: #1cade4;">.</span><span style="color: #1cade4;">php</span><strong><span style="color: green;">. </span></strong><span style="color: #192d3a;">Он будет отображать список сотрудников, когда пользователь пройдет авторизацию. Будет</span><span style="color: #192d3a;">
	</span><span style="color: #192d3a;">иметь</span><span style="color: #192d3a;"> </span><span style="color: #192d3a;">следующий</span><span style="color: #192d3a;"> </span><span style="color: #192d3a;">вид</span><span style="color: #192d3a;">.</span>
</p>
<div>
	<p><strong><span style="color: navy;">@extends(</span></strong><strong><span style="color: green;">'layout.master'</span></strong><strong><span style="color: navy;">)<br> @section(</span></strong><strong><span style="color: green;">'css'</span></strong><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">style</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> .</span><strong><span style="color: navy;">loading </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">background</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">#c9e2b3</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">padding</span></strong><span style="color: black;">: </span><span style="color: blue;">15</span><strong><span style="color: green;">px</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">position</span></strong><span style="color: black;">: </span><strong><span style="color: green;">fixed</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">border-radius</span></strong><span style="color: black;">: </span><span style="color: blue;">10</span><strong><span style="color: green;">px</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">left</span></strong><span style="color: black;">: </span><span style="color: blue;">50</span><span style="color: black;">%;<br></span><strong><span style="color: blue;">top</span></strong><span style="color: black;">: </span><span style="color: blue;">50</span><span style="color: black;">%;<br></span><strong><span style="color: blue;">text-align</span></strong><span style="color: black;">: </span><strong><span style="color: green;">center</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">margin</span></strong><span style="color: black;">: -</span><span style="color: blue;">40</span><strong><span style="color: green;">px </span></strong><span style="color: blue;">0 0 </span><span style="color: black;">-</span><span style="color: blue;">50</span><strong><span style="color: green;">px</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">z-index</span></strong><span style="color: black;">: </span><span style="color: blue;">2000</span><span style="color: black;">;<br></span><strong><span style="color: blue;">display</span></strong><span style="color: black;">: </span><strong><span style="color: green;">none</span></strong><span style="color: black;">;<br> }<br><br> .</span><strong><span style="color: navy;">form-group</span></strong><span style="color: black;">.</span><strong><span style="color: navy;">required label</span></strong><span style="color: black;">:</span><strong><span style="color: navy;">after </span></strong><span style="color: black;">{<br></span><strong><span style="color: blue;">content</span></strong><span style="color: black;">: </span><strong><span style="color: green;">" *"</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">color</span></strong><span style="color: black;">: </span><strong><span style="color: green;">red</span></strong><span style="color: black;">;<br></span><strong><span style="color: blue;">font-weight</span></strong><span style="color: black;">: </span><strong><span style="color: green;">bold</span></strong><span style="color: black;">;<br> }<br>&lt;/</span><strong><span style="color: navy;">style</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endsection<br><br> @section(</span></strong><strong><span style="color: green;">'content'</span></strong><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"content"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@include(</span></strong><strong><span style="color: green;">'ajaxCrud.index'</span></strong><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"loading"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">i </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"glyphicon glyphicon-refresh glyphicon-refresh-animate"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">i</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">br</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Загрузка..&lt;/</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endsection<br><br> @section(</span></strong><strong><span style="color: green;">'js'</span></strong><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">script </span></strong><strong><span style="color: blue;">src=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{ asset(</span><strong><span style="color: green;">'js/ajax.js'</span></strong><span style="color: black;">) }}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">script</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endsection</span></strong><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: #192d3a;"></span>
</p>
<p><span style="color: #192d3a;">При сортировке или поиске будет загружатся вид </span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">ajaxCrud</span></strong><strong><span style="color: green;">.</span></strong><strong><span style="color: green;">index</span></strong><strong><span style="color: green;">'</span></strong>
</p>
<div>
	<p><span style="color: black;">&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"container"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">h3 </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">text-align</span></strong><span style="color: black;">: </span><strong><span style="color: green;">center"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">AJAX CRUD for Employees&lt;/</span><strong><span style="color: navy;">h3</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{--*** Блок поиска на сайте по табице Employees ***--}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"row"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-sm-6 col-md-4 pull-right"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"input-group"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-control" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"search"<br></span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{ request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'search'</span></strong><span style="color: black;">) }}</span><strong><span style="color: green;">"<br></span></strong><strong><span style="color: blue;">onkeydown=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: navy;">if </span></strong><span style="color: black;">(</span><strong><em><span style="color: #660e7a;">event</span></em></strong><span style="color: black;">.</span><strong><span style="color: #660e7a;">keyCode </span></strong><span style="color: black;">== </span><span style="color: blue;">13</span><span style="color: black;">) <em>ajaxLoad</em>(</span><strong><span style="color: green;">'</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">?search='</span></strong><span style="color: black;">+</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">.</span><strong><span style="color: #660e7a;">value</span></strong><span style="color: black;">)</span><strong><span style="color: green;">"<br></span></strong><strong><span style="color: blue;">placeholder=</span></strong><strong><span style="color: green;">"Поиск сотрудников..." </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"search"<br></span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"text" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"search"</span></strong><span style="color: black;">/&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"input-group-btn"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">button </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"submit" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-info"<br></span></strong><strong><span style="color: blue;">onclick=</span></strong><strong><span style="color: green;">"</span></strong><em><span style="color: black;">ajaxLoad</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">?search='</span></strong><span style="color: black;">+<em>$</em>(</span><strong><span style="color: green;">'#search'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">val</span><span style="color: black;">())</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">i </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"glyphicon glyphicon-search" </span></strong><strong><span style="color: blue;">aria-hidden=</span></strong><strong><span style="color: green;">"true"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">i</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">button</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- ********************************************** --}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">br </span></strong><span style="color: black;">/&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">table </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"table"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">thead</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">width=</span></strong><strong><span style="color: green;">"60px"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Фото&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:</span></strong><em><span style="color: green;">ajaxLoad</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees?page='</span></strong><span style="color: black;">.(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'page'</span></strong><span style="color: black;">)).</span><strong><span style="color: green;">'&field=name&sort='<br></span></strong><span style="color: black;">.(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'desc'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">))}}</span><strong><span style="color: green;">')"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Ф. И. О&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'name'</span></strong><span style="color: black;">?(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'▴'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'▾'</span></strong><span style="color: black;">):</span><strong><span style="color: green;">''</span></strong><span style="color: black;">}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">vertical-align</span></strong><span style="color: black;">: </span><strong><span style="color: green;">middle"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:</span></strong><em><span style="color: green;">ajaxLoad</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees?page='</span></strong><span style="color: black;">.(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'page'</span></strong><span style="color: black;">)).</span><strong><span style="color: green;">'&field=position&sort='</span></strong><span style="color: black;">.(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'desc'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">))}}</span><strong><span style="color: green;">')"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Должность<br>&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'position'</span></strong><span style="color: black;">?(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'▴'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'▾'</span></strong><span style="color: black;">):</span><strong><span style="color: green;">''</span></strong><span style="color: black;">}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">vertical-align</span></strong><span style="color: black;">: </span><strong><span style="color: green;">middle"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:</span></strong><em><span style="color: green;">ajaxLoad</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees?page='</span></strong><span style="color: black;">.(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'page'</span></strong><span style="color: black;">)).</span><strong><span style="color: green;">'&field=date&sort='</span></strong><span style="color: black;">.(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'desc'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">))}}</span><strong><span style="color: green;">')"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Дата приема<br>&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'date'</span></strong><span style="color: black;">?(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'▴'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'▾'</span></strong><span style="color: black;">):</span><strong><span style="color: green;">''</span></strong><span style="color: black;">}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">vertical-align</span></strong><span style="color: black;">: </span><strong><span style="color: green;">middle"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:</span></strong><em><span style="color: green;">ajaxLoad</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees?page='</span></strong><span style="color: black;">.(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'page'</span></strong><span style="color: black;">)).</span><strong><span style="color: green;">'&field=salary&sort='</span></strong><span style="color: black;">.(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'desc'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">))}}</span><strong><span style="color: green;">')"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Зарплата<br>&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'field'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'salary'</span></strong><span style="color: black;">?(request()-&gt;session()-&gt;get(</span><strong><span style="color: green;">'sort'</span></strong><span style="color: black;">)==</span><strong><span style="color: green;">'asc'</span></strong><span style="color: black;">?</span><strong><span style="color: green;">'▴'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'▾'</span></strong><span style="color: black;">):</span><strong><span style="color: green;">''</span></strong><span style="color: black;">}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">th </span></strong><strong><span style="color: blue;">width=</span></strong><strong><span style="color: green;">"160px" </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">vertical-align</span></strong><span style="color: black;">: </span><strong><span style="color: green;">middle"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:</span></strong><em><span style="color: green;">ajaxLoad</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees/create'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">')"<br></span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-primary btn-xs"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"> &lt;</span><strong><span style="color: navy;">i </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"glyphicon glyphicon-plus" </span></strong><strong><span style="color: blue;">aria-hidden=</span></strong><strong><span style="color: green;">"true"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">i</span></strong><span style="color: black;">&gt;</span><span style="color: black;"> Добавить&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">thead</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tbody</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br></span><strong><span style="color: navy;">@foreach (</span></strong><span style="color: #660000;">$employees </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$empl</span><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;&lt;</span><strong><span style="color: navy;">img </span></strong><strong><span style="color: blue;">src=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{asset(</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">image</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"img-rounded" </span></strong><strong><span style="color: blue;">alt=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">width=</span></strong><strong><span style="color: green;">"32" </span></strong><strong><span style="color: blue;">height=</span></strong><strong><span style="color: green;">"32"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">th</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name </span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td </span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position </span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date </span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">salary </span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-success btn-xs" </span></strong><strong><span style="color: blue;">title=</span></strong><strong><span style="color: green;">"Show"<br></span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:</span></strong><em><span style="color: green;">ajaxLoad</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees/show/'</span></strong><span style="color: black;">.</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">')"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">b </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"glyphicon glyphicon-eye-open"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">b</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: blue;"> <br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-warning btn-xs" </span></strong><strong><span style="color: blue;">title=</span></strong><strong><span style="color: green;">"Edit"<br></span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:</span></strong><em><span style="color: green;">ajaxLoad</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees/edit/'</span></strong><span style="color: black;">.</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">')"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">b </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"glyphicon glyphicon-edit"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">b</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: blue;"> <br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"hidden" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"_method" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"delete"</span></strong><span style="color: black;">/&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-danger btn-xs" </span></strong><strong><span style="color: blue;">title=</span></strong><strong><span style="color: green;">"Delete"<br></span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:if(</span></strong><em><span style="color: green;">confirm</span></em><strong><span style="color: green;">('Вы хотите удалить сотрудника?')) </span></strong><em><span style="color: green;">ajaxDelete</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees/delete/'</span></strong><span style="color: black;">.</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">','</span></strong><span style="color: black;">{{csrf_token()}}</span><strong><span style="color: green;">')"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">b </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"glyphicon glyphicon-trash"</span></strong><span style="color: black;">&gt;&lt;/</span><strong><span style="color: navy;">b</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endforeach<br><br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">tbody</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">table</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{{ </span><span style="color: #660000;">$employees</span><span style="color: black;">-&gt;links()}}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: #192d3a;"><img src="https://word-to-html.ruhttps/word-to-html.ru/file/C/Users/8523~1/AppData/Local/Temp/msohtmlclip1/01/clip_image002.png" alt=""></span>
</p>
<p>Рисунок 2. Crud операции ajax<span style="color: #192d3a;"></span>
</p>
<p>Метод js для осуществления сортирвок и поиска
</p>
<div>
	<p><em><span style="color: black;">$</span></em><span style="color: black;">(</span><strong><em><span style="color: #660e7a;">document</span></em></strong><span style="color: black;">).</span><strong><span style="color: #660e7a;">on</span></strong><span style="color: black;">(</span><strong><span style="color: green;">'submit'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'form#frm'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(event) {<br> event.</span><span style="color: #7a7a43;">preventDefault</span><span style="color: black;">();<br></span><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">form </span><span style="color: black;">= <em>$</em>(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">);<br></span><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">data </span><span style="color: black;">= </span><strong><span style="color: navy;">new </span></strong><strong><em><span style="color: #660e7a;">FormData</span></em></strong><span style="color: black;">(<em>$</em>(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">)[</span><span style="color: blue;">0</span><span style="color: black;">]);<br></span><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">url </span><span style="color: black;">= </span><span style="color: #458383;">form</span><span style="color: black;">.</span><span style="color: #7a7a43;">attr</span><span style="color: black;">(</span><strong><span style="color: green;">"action"</span></strong><span style="color: black;">);<br><em>$</em>.</span><strong><span style="color: #660e7a;">ajax</span></strong><span style="color: black;">({<br></span><strong><span style="color: #660e7a;">type</span></strong><span style="color: black;">: </span><span style="color: #458383;">form</span><span style="color: black;">.</span><span style="color: #7a7a43;">attr</span><span style="color: black;">(</span><strong><span style="color: green;">'method'</span></strong><span style="color: black;">),<br></span><strong><span style="color: #660e7a;">url</span></strong><span style="color: black;">: </span><span style="color: #458383;">url</span><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">data</span></strong><span style="color: black;">: </span><span style="color: #458383;">data</span><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">cache</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">false</span></strong><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">contentType</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">false</span></strong><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">processData</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">false</span></strong><span style="color: black;">,<br></span><span style="color: #7a7a43;">success</span><span style="color: black;">: </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(data) {<br><em>$</em>(</span><strong><span style="color: green;">'.is-invalid'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">removeClass</span><span style="color: black;">(</span><strong><span style="color: green;">'is-invalid'</span></strong><span style="color: black;">);<br></span><strong><span style="color: navy;">if </span></strong><span style="color: black;">(data.<em>fail</em>) {<br></span><strong><span style="color: navy;">for </span></strong><span style="color: black;">(</span><strong><span style="color: #660e7a;">control </span></strong><strong><span style="color: navy;">in </span></strong><span style="color: black;">data.</span><strong><span style="color: #660e7a;">errors</span></strong><span style="color: black;">) {<br><em>$</em>(</span><strong><span style="color: green;">'#' </span></strong><span style="color: black;">+ </span><strong><span style="color: #660e7a;">control</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">addClass</span><span style="color: black;">(</span><strong><span style="color: green;">'is-invalid'</span></strong><span style="color: black;">);<br><em>$</em>(</span><strong><span style="color: green;">'#error-' </span></strong><span style="color: black;">+ </span><strong><span style="color: #660e7a;">control</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">html</span><span style="color: black;">(data.</span><strong><span style="color: #660e7a;">errors</span></strong><span style="color: black;">[</span><strong><span style="color: #660e7a;">control</span></strong><span style="color: black;">]);<br> }<br> } </span><strong><span style="color: navy;">else </span></strong><span style="color: black;">{<br><em>ajaxLoad</em>(data.redirect_url);<br> }<br> },<br></span><span style="color: #7a7a43;">error</span><span style="color: black;">: </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(xhr, textStatus, errorThrown) {<br><em>alert</em>(</span><strong><span style="color: green;">"Error: " </span></strong><span style="color: black;">+ errorThrown);<br> }<br> });<br></span><strong><span style="color: navy;">return false</span></strong><span style="color: black;">;<br> });</span>
	</p>
</div>
<p>Подгрузка контента
</p>
<div>
	<p><strong><span style="color: navy;">function </span></strong><em><span style="color: black;">ajaxLoad</span></em><span style="color: black;">(filename, content) {<br> content = </span><strong><span style="color: navy;">typeof </span></strong><span style="color: black;">content !== </span><strong><span style="color: green;">'undefined' </span></strong><span style="color: black;">? content : </span><strong><span style="color: green;">'content'</span></strong><span style="color: black;">;<br><em>$</em>(</span><strong><span style="color: green;">'.loading'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">show</span><span style="color: black;">();<br><em>$</em>.</span><strong><span style="color: #660e7a;">ajax</span></strong><span style="color: black;">({<br></span><strong><span style="color: #660e7a;">type</span></strong><span style="color: black;">: </span><strong><span style="color: green;">"GET"</span></strong><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">url</span></strong><span style="color: black;">: filename,<br></span><strong><span style="color: #660e7a;">contentType</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">false</span></strong><span style="color: black;">,<br></span><span style="color: #7a7a43;">success</span><span style="color: black;">: </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(data) {<br><em>$</em>(</span><strong><span style="color: green;">"#" </span></strong><span style="color: black;">+ content).</span><span style="color: #7a7a43;">html</span><span style="color: black;">(data);<br><em>$</em>(</span><strong><span style="color: green;">'.loading'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">hide</span><span style="color: black;">();<br> },<br></span><span style="color: #7a7a43;">error</span><span style="color: black;">: </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(xhr, status, error) {<br><em>alert</em>(xhr.responseText);<br> }<br> });<br> }</span>
	</p>
</div>
<p>Метод show контроллера <span style="color: black;">AjaxEmployeeController</span><span style="color: black;"> </span>будет производить отображение информации о конкретном выбранном сотруднике.
</p>
<p><span style="color: black;"> </span>
</p>
<div>
	<p><strong><span style="color: navy;">public</span></strong><strong><span style="color: navy;">
		</span></strong><strong><span style="color: navy;">function</span></strong><strong><span style="color: navy;"> </span></strong><span style="color: black;">show</span><span style="color: black;">(</span><span style="color: black;">Request</span><span style="color: black;"> </span><span style="color: #660000;">$</span><span style="color: #660000;">request</span><span style="color: black;">, </span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">)<br> {<br></span><em><span style="color: gray;">/**<br> *Метод </span></em><em><span style="color: gray;">show</span></em><em><span style="color: gray;"> принимает значение </span></em><em><span style="color: gray;">ID</span></em><em><span style="color: gray;"> конкретного сотрудника<br> * Функция </span></em><em><span style="color: gray;">getEmployeesID</span></em><em><span style="color: gray;"> делаем выборку по конкретному сотруднику с нужным </span></em><em><span style="color: gray;">id</span></em><em><span style="color: gray;"><br> * возвращает массив сотрудников с нужным </span></em><em><span style="color: gray;">ID</span></em><em><span style="color: gray;">. При этом отображает начальника сотрудника<br> * его ФИО и занимаемую должность.<br></span></em><em><span style="color: gray;">*/<br></span></em><strong><span style="color: navy;">if</span></strong><span style="color: black;">(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;isMethod(</span><strong><span style="color: green;">'get'</span></strong><span style="color: black;">)) {<br></span><span style="color: #660000;">$employees </span><span style="color: black;">= Employees::<em>getEmployeesID</em>(</span><span style="color: #660000;">$id</span><span style="color: black;">);<br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">view(</span><strong><span style="color: green;">'ajaxCrud.show'</span></strong><span style="color: black;">,[</span><strong><span style="color: green;">'employees' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$employees</span><span style="color: black;">]);<br> }<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p>Метод <em><span style="color: black;">getEmployeesID</span></em><em><span style="color: black;"> </span></em><span style="color: black;">модели </span><span style="color: black;">App</span><span style="color: black;">\</span><span style="color: black;">Employees</span><span style="color: black;"> </span><span style="color: black;">осуществляет выборку информации о сотруднике и его начальнике.</span>
</p>
<div>
	<p><strong><span style="color: navy;">static public function </span></strong><span style="color: black;">getEmployeesID(</span><span style="color: #660000;">$id</span><span style="color: black;">)<br> {<br></span><strong><span style="color: navy;">return<br></span></strong><span style="color: black;">DB::<em>select</em>(</span><strong><span style="color: green;">'select name, date, image, position, salary,<br> (select name from employees b where a.parent_id = b.id) chiefName,<br> (select position from employees d<br> left join position c ON<br> c.id = d.position_id where a.parent_id = d.id) chiefPosition<br> from employees a<br> left join position c<br> ON c.id = a.position_id<br> where a.id = :id'</span></strong><span style="color: black;">, [</span><strong><span style="color: green;">'id' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$id</span><span style="color: black;">]);<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: black;"></span>
</p>
<p>Вид show.blade.php. Вывод информации о конкретном оструднике.
</p>
<div>
	<p><span style="color: black;">&lt;</span><strong><span style="color: navy;">h2 </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"text-center text-primary"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Информация о сотруднике&lt;/</span><strong><span style="color: navy;">h2</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"row"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@foreach(</span></strong><span style="color: #660000;">$employees </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$empl</span><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-xs-6 col-md-4"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">img </span></strong><strong><span style="color: blue;">src=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{asset(</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">image</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">alt=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">width=</span></strong><strong><span style="color: green;">"350" </span></strong><strong><span style="color: blue;">height=</span></strong><strong><span style="color: green;">"400"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-xs-6 col-md-6"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">h3 </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"my-3"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">h3</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">table </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"table"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Должность&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Дата приема&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Зарплата&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">salary</span></strong><span style="color: black;">}} </span><span style="color: black;">руб.&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">table</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">h4 </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"my-3"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Начальник сотрудника&lt;/</span><strong><span style="color: navy;">h4</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">table </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"table"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Ф.И.О&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">chiefName</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Должность&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">chiefPosition</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">table</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-md-4"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:</span></strong><em><span style="color: green;">ajaxLoad</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">')" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-danger btn-xs"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Назад&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endforeach<br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"></span>
	</p>
</div>
<div>
	<p><em><span style="color: gray;">/**<br> *Добовляем нового сотрудника в базу данных<br> */<br></span></em><strong><span style="color: navy;">public function </span></strong><span style="color: black;">create(Request </span><span style="color: #660000;">$request</span><span style="color: black;">)<br> {<br></span><strong><span style="color: navy;">if </span></strong><span style="color: black;">(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;isMethod(</span><strong><span style="color: green;">'get'</span></strong><span style="color: black;">)){<br></span><span style="color: #660000;">$position </span><span style="color: black;">= Position::<em>all</em>(); </span><em><span style="color: gray;">//Выбираем все должности для острудника<br> //Передаем виду create и отображаем select-ом для выбоара должности нанимаегого сотрудника<br></span></em><strong><span style="color: navy;">return </span></strong><span style="color: black;">view(</span><strong><span style="color: green;">'ajaxCrud.create'</span></strong><span style="color: black;">, <em>compact</em>(</span><strong><span style="color: green;">'position'</span></strong><span style="color: black;">));<br> }<br></span><em><span style="color: gray;">//Правило для полей при отправке формы, для добавления<br> //инфо о сотруднике, В случае не соответствия вернем ошибку.<br></span></em><span style="color: #660000;">$this</span><span style="color: black;">-&gt;validate(</span><span style="color: #660000;">$request</span><span style="color: black;">, [<br></span><strong><span style="color: green;">'name' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'required|max:100'</span></strong><span style="color: black;">, </span><em><span style="color: gray;">//Проверка ФИО работника<br></span></em><strong><span style="color: green;">'parent_id' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'required||regex:/^[1-9]+$/i'</span></strong><span style="color: black;">,</span><em><span style="color: gray;">//Проверка на начальника, передается число<br></span></em><strong><span style="color: green;">'position_id' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'required||regex:/^[0-9]+$/i'</span></strong><span style="color: black;">,</span><em><span style="color: gray;">//Проверка на должность, предается число.<br></span></em><strong><span style="color: green;">'date' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'required||regex:/^\d{4}-\d{2}-\d{2}/' </span></strong><em><span style="color: gray;">//Дата приема в формате YYYY-MM-DD<br></span></em><span style="color: black;">]);<br></span><strong><span style="color: navy;">if</span></strong><span style="color: black;">(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;hasFile(</span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">)){</span><em><span style="color: gray;">//Если передано изображение<br></span></em><span style="color: #660000;">$f_name</span><span style="color: black;">=</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;file(</span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">)-&gt;getClientOriginalName();</span><em><span style="color: gray;">//определяем имя файла<br></span></em><span style="color: #660000;">$root </span><span style="color: black;">= public_path(</span><strong><span style="color: green;">'img'</span></strong><span style="color: black;">); </span><em><span style="color: gray;">// это корневая папка для загрузки картинок<br></span></em><span style="color: #660000;">$request</span><span style="color: black;">-&gt;file(</span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">)-&gt;move(</span><span style="color: #660000;">$root</span><span style="color: black;">, </span><span style="color: #660000;">$f_name</span><span style="color: black;">); </span><em><span style="color: gray;">//перемещаем файл в папку с оригинальным именем<br></span></em><span style="color: #660000;">$all</span><span style="color: black;">=</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;all(); </span><em><span style="color: gray;">//в переменой $all будет массив, который содержит все введенные данные в форме<br></span></em><span style="color: #660000;">$all</span><span style="color: black;">[</span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">]=</span><strong><span style="color: green;">"/img/"</span></strong><span style="color: black;">.</span><span style="color: #660000;">$f_name</span><span style="color: black;">;</span><em><span style="color: gray;">// меняем значение image на нашу ссылку, иначе в базу попадет что-то вроде /tmp/adfEEsf.tmp<br></span></em><span style="color: black;">Employees::<em>create</em>(</span><span style="color: #660000;">$all</span><span style="color: black;">);<br> }<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p>Вид добавления нового сотрудника create.blade.php.
</p>
<div>
	<p><span style="color: black;">&lt;</span><strong><span style="color: navy;">h1 </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"text-center text-primary"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Добавление сотрудника&lt;/</span><strong><span style="color: navy;">h1</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">hr</span></strong><span style="color: black;">/&gt;</span><span style="color: black;"><br>{!! Form::open([</span><strong><span style="color: green;">'id'</span></strong><span style="color: black;">=&gt;</span><strong><span style="color: green;">'frm'</span></strong><span style="color: black;">]) !!}<br></span><span style="color: black;">&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"row"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-xs-6 col-md-4 center-block"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">b </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">margin-left</span></strong><span style="color: black;">: </span><span style="color: blue;">20</span><strong><span style="color: green;">px"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Загрузите изображение&lt;/</span><strong><span style="color: navy;">b</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">span </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">color</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">#BA0000</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-family</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">Verdana</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-size</span></strong><span style="color: black;">: </span><span style="color: blue;">14</span><strong><span style="color: green;">px</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-weight</span></strong><span style="color: black;">: </span><strong><span style="color: green;">bold</span></strong><span style="color: black;">;</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"> *&lt;/</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"anyName"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"file" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"image" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"img" </span></strong><strong><span style="color: blue;">accept=</span></strong><strong><span style="color: green;">"image/gif, image/jpeg, image/png" </span></strong><strong><span style="color: blue;">required=</span></strong><strong><span style="color: green;">"required"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-xs-6 col-md-6"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">table </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"table"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-group row required"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Ф.И.О.&lt;</span><strong><span style="color: navy;">span </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">color</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">#BA0000</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-family</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">Verdana</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-size</span></strong><span style="color: black;">: </span><span style="color: blue;">14</span><strong><span style="color: green;">px</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-weight</span></strong><span style="color: black;">: </span><strong><span style="color: green;">bold</span></strong><span style="color: black;">;</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"> *&lt;/</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"name" </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"text" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-control" </span></strong><strong><span style="color: blue;">placeholder=</span></strong><strong><span style="color: green;">"Введите имя" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"" </span></strong><strong><span style="color: blue;">required</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Должность &lt;</span><strong><span style="color: navy;">span </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">color</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">#BA0000</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-family</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">Verdana</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-size</span></strong><span style="color: black;">: </span><span style="color: blue;">14</span><strong><span style="color: green;">px</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-weight</span></strong><span style="color: black;">: </span><strong><span style="color: green;">bold</span></strong><span style="color: black;">;</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"> *&lt;/</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">select </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-control" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"position_id" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"position" </span></strong><strong><span style="color: blue;">required=</span></strong><strong><span style="color: green;">"required"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@foreach(</span></strong><span style="color: #660000;">$position </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$pos</span><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">option </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"pos" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;id}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;id}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;position}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">option</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endforeach<br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">select</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Дата приема<br>&lt;</span><strong><span style="color: navy;">span </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">color</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">#BA0000</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-family</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">Verdana</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-size</span></strong><span style="color: black;">: </span><span style="color: blue;">14</span><strong><span style="color: green;">px</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-weight</span></strong><span style="color: black;">: </span><strong><span style="color: green;">bold</span></strong><span style="color: black;">;</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"> *&lt;/</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-group"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"date" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"date" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-control" </span></strong><strong><span style="color: blue;">required=</span></strong><strong><span style="color: green;">"required"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Начальник<br>&lt;</span><strong><span style="color: navy;">span </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">color</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">#BA0000</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-family</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">Verdana</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-size</span></strong><span style="color: black;">: </span><span style="color: blue;">14</span><strong><span style="color: green;">px</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-weight</span></strong><span style="color: black;">: </span><strong><span style="color: green;">bold</span></strong><span style="color: black;">;</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"> *&lt;/</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{!! Form::select(</span><strong><span style="color: green;">'parent_id'</span></strong><span style="color: black;">,[</span><strong><span style="color: green;">''</span></strong><span style="color: black;">=&gt;</span><strong><span style="color: green;">'--- Начальник ---'</span></strong><span style="color: black;">],null,[</span><strong><span style="color: green;">'class'</span></strong><span style="color: black;">=&gt;</span><strong><span style="color: green;">'form-control'</span></strong><span style="color: black;">]) !!}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">table</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-md-4"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:ajaxLoad('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">')" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-danger btn-xs"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Назад&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">button </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"submit" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-primary btn-xs" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"submit" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"submit1"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Сохранить&lt;/</span><strong><span style="color: navy;">button</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>{!! Form::close() !!}<br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">script </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"text/javascript"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><em>$</em>(</span><strong><span style="color: green;">'.anyName'</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">uploadPreview</span><span style="color: black;">({<br></span><strong><span style="color: #660e7a;">width</span></strong><span style="color: black;">: </span><strong><span style="color: green;">'200px'</span></strong><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">height</span></strong><span style="color: black;">: </span><strong><span style="color: green;">'200px'</span></strong><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">backgroundSize</span></strong><span style="color: black;">: </span><strong><span style="color: green;">'cover'</span></strong><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">fontSize</span></strong><span style="color: black;">: </span><strong><span style="color: green;">'16px'</span></strong><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">borderRadius</span></strong><span style="color: black;">: </span><strong><span style="color: green;">'100px'</span></strong><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">border</span></strong><span style="color: black;">: </span><strong><span style="color: green;">'3px solid #dedede'</span></strong><span style="color: black;">,<br></span><strong><span style="color: #660e7a;">lang</span></strong><span style="color: black;">: </span><strong><span style="color: green;">'ru'</span></strong><span style="color: black;">, </span><em><span style="color: gray;">//language<br></span></em><span style="color: black;">});<br>&lt;/</span><strong><span style="color: navy;">script</span></strong><span style="color: black;">&gt;</span><span style="color: black;"></span>
	</p>
</div>
<p>Для редактирования информации о сотруднике используется метод <span style="color: #1cade4;">edit</span><span style="color: #1cade4;"> </span>контроллера <span style="color: black;">AjaxEmployeeController</span><span style="color: black;">.</span>
</p>
<div>
	<p><strong><span style="color: navy;">public function </span></strong><span style="color: black;">edit(Request </span><span style="color: #660000;">$request</span><span style="color: black;">, </span><span style="color: #660000;">$id</span><span style="color: black;">)<br> {<br></span><strong><span style="color: navy;">if </span></strong><span style="color: black;">(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;isMethod(</span><strong><span style="color: green;">'get'</span></strong><span style="color: black;">)){<br></span><span style="color: #660000;">$employees </span><span style="color: black;">= Employees::<em>getEmployeesID</em>(</span><span style="color: #660000;">$id</span><span style="color: black;">);<br></span><span style="color: #660000;">$position </span><span style="color: black;">= Position::<em>all</em>();<br></span><strong><span style="color: navy;">return </span></strong><span style="color: black;">view(</span><strong><span style="color: green;">'ajaxCrud.edit'</span></strong><span style="color: black;">,[</span><strong><span style="color: green;">'employees' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$employees</span><span style="color: black;">, </span><strong><span style="color: green;">'position' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$position</span><span style="color: black;">, </span><strong><span style="color: green;">'id' </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$id</span><span style="color: black;">]);<br> }<br></span><strong><span style="color: navy;">if</span></strong><span style="color: black;">(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;isMethod(</span><strong><span style="color: green;">'put'</span></strong><span style="color: black;">)){<br></span><span style="color: #660000;">$employees </span><span style="color: black;">= Employees::<em>find</em>(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">);<br></span><span style="color: #660000;">$employees</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name </span></strong><span style="color: black;">= </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name</span></strong><span style="color: black;">; </span><em><span style="color: gray;">//Сохраняем имя.<br><br></span></em><strong><span style="color: navy;">if</span></strong><span style="color: black;">(</span><strong><span style="color: navy;">isset</span></strong><span style="color: black;">(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position_id</span></strong><span style="color: black;">)){<br></span><span style="color: #660000;">$employees</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position_id </span></strong><span style="color: black;">= </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position_id</span></strong><span style="color: black;">;</span><em><span style="color: gray;">//Сохраняем должность<br></span></em><span style="color: #660000;">$employees</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position_id </span></strong><span style="color: black;">= </span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">parent_id</span></strong><span style="color: black;">;</span><em><span style="color: gray;">//Сохраняем Начальника для сотрудника<br></span></em><span style="color: black;">}<br></span><strong><span style="color: navy;">if</span></strong><span style="color: black;">(</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;hasFile(</span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">)){</span><em><span style="color: gray;">//Если передано изображение<br></span></em><span style="color: #660000;">$f_name</span><span style="color: black;">=</span><span style="color: #660000;">$request</span><span style="color: black;">-&gt;file(</span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">)-&gt;getClientOriginalName();</span><em><span style="color: gray;">//определяем имя файла<br></span></em><span style="color: #660000;">$root </span><span style="color: black;">= public_path(</span><strong><span style="color: green;">'img'</span></strong><span style="color: black;">); </span><em><span style="color: gray;">// это корневая папка для загрузки картинок<br></span></em><span style="color: #660000;">$request</span><span style="color: black;">-&gt;file(</span><strong><span style="color: green;">'image'</span></strong><span style="color: black;">)-&gt;move(</span><span style="color: #660000;">$root</span><span style="color: black;">, </span><span style="color: #660000;">$f_name</span><span style="color: black;">); </span><em><span style="color: gray;">//перемещаем файл в папку с оригинальным именем<br></span></em><span style="color: #660000;">$employees</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">image</span></strong><span style="color: black;">=</span><strong><span style="color: green;">"/img/"</span></strong><span style="color: black;">.</span><span style="color: #660000;">$f_name</span><span style="color: black;">;</span><em><span style="color: gray;">// меняем значение image на нашу ссылку, иначе в базу попадет что-то вроде /tmp/adfEEsf.tmp<br></span></em><span style="color: black;">}<br></span><span style="color: #660000;">$employees</span><span style="color: black;">-&gt;save();</span><em><span style="color: gray;">//Сохраняем отредактированную инфу в базу<br></span></em><strong><span style="color: navy;">return </span></strong><span style="color: black;">response()-&gt;json([<br></span><strong><span style="color: green;">'fail' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: navy;">false</span></strong><span style="color: black;">,<br></span><strong><span style="color: green;">'redirect_url' </span></strong><span style="color: black;">=&gt; url(</span><strong><span style="color: green;">'ajaxemployees'</span></strong><span style="color: black;">)<br> ]);<br> }<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p>При изменении должности сотрудника используется метод <span style="color: black;">change</span><span style="color: black;"> </span>контроллера <span style="color: black;">AjaxEmployeeController</span><span style="color: black;">. </span><span style="color: black;">Данный метод принимает информацию по средствам </span><span style="color: black;">ajax</span><span style="color: black;"> и выводит список всех начальников для сотрудника.</span>
</p>
<div>
	<p><em><span style="color: gray;">//Метод </span></em><em><span style="color: gray;">change</span></em><em><span style="color: gray;"> нужен для </span></em><em><span style="color: gray;">select</span></em><em><span style="color: gray;">-а при добавлении сотрудника<br> //Данные аередаются через </span></em><em><span style="color: gray;">ajax</span></em><em><span style="color: gray;">.<br> //Выбрав должность ему предлагается выбрать начальника<br> //Ранг начальника должен быть выше.<br></span></em><strong><span style="color: navy;">public</span></strong><strong><span style="color: navy;"> </span></strong><strong><span style="color: navy;">function</span></strong><strong><span style="color: navy;">
		</span></strong><span style="color: black;">change</span><span style="color: black;">(</span><span style="color: black;">Request</span><span style="color: black;"> </span><span style="color: #660000;">$</span><span style="color: #660000;">request</span><span style="color: black;">){<br></span><strong><span style="color: navy;">if</span></strong><strong><span style="color: navy;">
		</span></strong><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">request</span><span style="color: black;">-&gt;</span><span style="color: black;">isMethod</span><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">get</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">)){<br></span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: #660000;"> </span><span style="color: black;">= </span><span style="color: #660000;">$</span><span style="color: #660000;">request</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">; </span><em><span style="color: gray;">// </span></em><em><span style="color: gray;">ID</span></em><em><span style="color: gray;"> выбраной должности<br></span></em><span style="color: #660000;">$</span><span style="color: #660000;">chiefs</span><span style="color: #660000;"> </span><span style="color: black;">= </span><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">getChiefs</span></em><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">); </span><em><span style="color: gray;">//Выбираепм имена всех начальников старших по должности<br></span></em><span style="color: #660000;">$</span><span style="color: #660000;">data</span><span style="color: #660000;"> </span><span style="color: black;">= </span><span style="color: black;">view</span><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">ajaxCrud</span></strong><strong><span style="color: green;">.</span></strong><strong><span style="color: green;">ajax</span></strong><strong><span style="color: green;">-</span></strong><strong><span style="color: green;">select</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">,</span><em><span style="color: black;">compact</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">chiefs</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">))-&gt;</span><span style="color: black;">render</span><span style="color: black;">();<br></span><strong><span style="color: navy;">return</span></strong><strong><span style="color: navy;">
		</span></strong><span style="color: black;">response</span><span style="color: black;">()-&gt;</span><span style="color: black;">json</span><span style="color: black;">([</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">options</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">=&gt;</span><span style="color: #660000;">$</span><span style="color: #660000;">data</span><span style="color: black;">]);<br> }<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: black;"></span>
</p>
<p><span style="color: black;">В модели </span><span style="color: black;">Empoyees</span><span style="color: black;"> создаем метод </span><em><span style="color: #1cade4;">getChiefs</span></em><span style="color: black;">. </span><span style="color: black;">Выбираем начальников для сотрудника при добавлении. Выбираем только тех сотрудников где переданный уровень позиции выше.</span><span style="color: black;"></span>
</p>
<div>
	<p><strong><span style="color: navy;">static public function </span></strong><span style="color: black;">getChiefs(</span><span style="color: #660000;">$id</span><span style="color: black;">){<br></span><strong><span style="color: navy;">return<br></span></strong><span style="color: black;">DB::<em>table</em>(</span><strong><span style="color: green;">'employees'</span></strong><span style="color: black;">)-&gt;where(</span><strong><span style="color: green;">'position_id'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'&lt;'</span></strong><span style="color: black;">, </span><span style="color: #660000;">$id</span><span style="color: black;">)-&gt;pluck(</span><strong><span style="color: green;">"name"</span></strong><span style="color: black;">, </span><strong><span style="color: green;">"id"</span></strong><span style="color: black;">)-&gt;all();<br> }</span><span style="color: black;"></span>
	</p>
</div>
<p><span style="color: black;"></span>
</p>
<p><span style="color: black;"></span>
</p>
<p><span style="color: black;">В файле </span><span style="color: black;">ajax</span><span style="color: black;">.</span><span style="color: black;">js</span><span style="color: black;"> создадим метод. Который реагирует на изменение </span><span style="color: black;">select</span><span style="color: black;">-</span><span style="color: black;">a</span><span style="color: black;">, то есть на изменение должности сотрудника.</span>
</p>
<div>
	<p><em><span style="color: black;">$</span></em><span style="color: black;">(</span><strong><em><span style="color: #660e7a;">document</span></em></strong><span style="color: black;">)</span><span style="color: black;">.</span><strong><span style="color: #660e7a;">on</span></strong><span style="color: black;">(</span><strong><span style="color: green;">'change'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'#position'</span></strong><span style="color: black;">, </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(event) {<br> event.</span><span style="color: #7a7a43;">preventDefault</span><span style="color: black;">();<br></span><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">position </span><span style="color: black;">= <em>$</em>(</span><strong><span style="color: green;">"#position option:selected"</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">val</span><span style="color: black;">();<br></span><strong><span style="color: navy;">var </span></strong><span style="color: #458383;">formData </span><span style="color: black;">= <em>$</em>(</span><strong><span style="color: navy;">this</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">val</span><span style="color: black;">();<br><em>$</em>.</span><strong><span style="color: #660e7a;">ajax</span></strong><span style="color: black;">({<br></span><strong><span style="color: #660e7a;">method</span></strong><span style="color: black;">: </span><strong><span style="color: green;">'GET'</span></strong><span style="color: black;">, </span><em><span style="color: gray;">// Type of response and matches what we said in the route<br></span></em><strong><span style="color: #660e7a;">url</span></strong><span style="color: black;">: </span><strong><span style="color: green;">'ajaxemployees/changeselect'</span></strong><span style="color: black;">, </span><em><span style="color: gray;">// This is the url we gave in the route<br></span></em><strong><span style="color: #660e7a;">data</span></strong><span style="color: black;">: {</span><strong><span style="color: green;">'id'</span></strong><span style="color: black;">: </span><span style="color: #458383;">position</span><span style="color: black;">}, </span><em><span style="color: gray;">// a JSON object to send back<br></span></em><strong><span style="color: #660e7a;">contentType</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">false</span></strong><span style="color: black;">,<br></span><span style="color: #7a7a43;">success</span><span style="color: black;">: </span><strong><span style="color: navy;">function</span></strong><span style="color: black;">(response){ </span><em><span style="color: gray;">// What to do if we succeed<br></span></em><em><span style="color: black;">$</span></em><span style="color: black;">(</span><strong><span style="color: green;">"select[name='parent_id']"</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">html</span><span style="color: black;">(</span><strong><span style="color: green;">''</span></strong><span style="color: black;">);<br><em>$</em>(</span><strong><span style="color: green;">"select[name='parent_id']"</span></strong><span style="color: black;">).</span><span style="color: #7a7a43;">html</span><span style="color: black;">(response.</span><strong><span style="color: #660e7a;">options</span></strong><span style="color: black;">);<br> },<br></span><span style="color: #7a7a43;">error</span><span style="color: black;">: </span><strong><span style="color: navy;">function </span></strong><span style="color: black;">(xhr, status, error) {<br><em>alert</em>(xhr.responseText);<br> }<br> });<br> });</span>
	</p>
</div>
<p>Далее
вид ajax-select.blade.php
</p>
<div>
	<p><strong><span style="color: navy;">@if(</span></strong><span style="color: black;">!</span><strong><span style="color: navy;">empty</span></strong><span style="color: black;">(</span><span style="color: #660000;">$chiefs</span><span style="color: black;">)</span><strong><span style="color: navy;">)<br> @foreach(</span></strong><span style="color: #660000;">$chiefs </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$key </span><span style="color: black;">=&gt; </span><span style="color: #660000;">$value</span><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">option </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{ </span><span style="color: #660000;">$key </span><span style="color: black;">}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{ </span><span style="color: #660000;">$value </span><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">option</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endforeach<br> @endif</span></strong><span style="color: black;"></span>
	</p>
</div>
<p>Шаблон для редактирования информации о сотруднике edit.blade.php
</p>
<div>
	<p><span style="color: black;">&lt;</span><strong><span style="color: navy;">h1 </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"text-center text-primary"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><strong><span style="color: navy;">isset</span></strong><span style="color: black;">(</span><span style="color: #660000;">$employees</span><span style="color: black;">)?</span><strong><span style="color: green;">'Редактирование'</span></strong><span style="color: black;">:</span><strong><span style="color: green;">'Добавление'</span></strong><span style="color: black;">}} </span><span style="color: black;">сотрудника&lt;/</span><strong><span style="color: navy;">h1</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">hr</span></strong><span style="color: black;">/&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@if(isset</span></strong><span style="color: black;">(</span><span style="color: #660000;">$employees</span><span style="color: black;">)</span><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">{!! Form::<em>model</em>(</span><span style="color: #660000;">$employees</span><span style="color: black;">,[</span><strong><span style="color: green;">'method'</span></strong><span style="color: black;">=&gt;</span><strong><span style="color: green;">'put'</span></strong><span style="color: black;">,</span><strong><span style="color: green;">'id'</span></strong><span style="color: black;">=&gt;</span><strong><span style="color: green;">'frm'</span></strong><span style="color: black;">]) !!}<br></span><strong><span style="color: navy;">@endif<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"row"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@foreach(</span></strong><span style="color: #660000;">$employees </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$empl</span><strong><span style="color: navy;">)<br></span></strong><em><span style="color: gray;">{{-- Загружаем изображение --}}<br></span></em><span style="color: black;">&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-xs-6 col-md-4"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">img </span></strong><strong><span style="color: blue;">src=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{asset(</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">image</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"image" </span></strong><strong><span style="color: blue;">alt=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">width=</span></strong><strong><span style="color: green;">"350" </span></strong><strong><span style="color: blue;">height=</span></strong><strong><span style="color: green;">"400"</span></strong><span style="color: black;">&gt;&lt;</span><strong><span style="color: navy;">br</span></strong><span style="color: black;">&gt;&lt;</span><strong><span style="color: navy;">br</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">span </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-default btn-file"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Загрузка изображения<br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"file" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"image" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"img" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-control-file" </span></strong><strong><span style="color: blue;">accept=</span></strong><strong><span style="color: green;">"image/gif, image/jpeg, image/png"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"hidden" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$id</span><span style="color: black;">}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"empl_id"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-xs-6 col-md-6"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">table </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"table"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-group row required"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Ф.И.О.&lt;</span><strong><span style="color: navy;">span </span></strong><strong><span style="color: blue;">style=</span></strong><strong><span style="color: green;">"</span></strong><strong><span style="color: blue;">color</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">#BA0000</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-family</span></strong><span style="color: black;">: </span><strong><span style="color: navy;">Verdana</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-size</span></strong><span style="color: black;">: </span><span style="color: blue;">14</span><strong><span style="color: green;">px</span></strong><span style="color: black;">; </span><strong><span style="color: blue;">font-weight</span></strong><span style="color: black;">: </span><strong><span style="color: green;">bold</span></strong><span style="color: black;">;</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"> *&lt;/</span><strong><span style="color: navy;">span</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"name" </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"text" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-control" </span></strong><strong><span style="color: blue;">placeholder=</span></strong><strong><span style="color: green;">"Ваше имя" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">name</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">required</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Текущая должность&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Изменить должность<br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-check-input" </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"checkbox" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"enableSelect"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">input </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"hidden" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"hidenPosition" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">select </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"form-control" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"position_id" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"position" </span></strong><strong><span style="color: blue;">disabled</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@foreach(</span></strong><span style="color: #660000;">$position </span><strong><span style="color: navy;">as </span></strong><span style="color: #660000;">$pos</span><strong><span style="color: navy;">)<br> @if(</span></strong><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position </span></strong><span style="color: black;">== </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><strong><span style="color: navy;">)<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">option </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"pos" </span></strong><strong><span style="color: blue;">selected id=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">option</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@else<br></span></strong><span style="color: black;">&lt;</span><strong><span style="color: navy;">option </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"pos" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">" </span></strong><strong><span style="color: blue;">value=</span></strong><strong><span style="color: green;">"</span></strong><span style="color: black;">{{</span><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">}}</span><strong><span style="color: green;">"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$pos</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">option</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endif<br> @endforeach<br></span></strong><span style="color: black;">&lt;/</span><strong><span style="color: navy;">select</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Дата приема&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">date</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Зарплата&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">salary</span></strong><span style="color: black;">}} </span><span style="color: black;">руб.&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">table</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br><br>&lt;</span><strong><span style="color: navy;">h4 </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"my-3"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Начальник сотрудника&lt;/</span><strong><span style="color: navy;">h4</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">table </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"table"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Ф.И.О&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">chiefName</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Должность&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;">{{</span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">chiefPosition</span></strong><span style="color: black;">}}</span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Изменить начальника<br>&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>{!! Form::<em>select</em>(</span><strong><span style="color: green;">'parent_id'</span></strong><span style="color: black;">,[</span><strong><span style="color: green;">''</span></strong><span style="color: black;">=&gt;</span><strong><span style="color: green;">'--- Начальник ---'</span></strong><span style="color: black;">], </span><span style="color: #660000;">$empl</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">chiefName</span></strong><span style="color: black;">,[</span><strong><span style="color: green;">'class'</span></strong><span style="color: black;">=&gt;</span><strong><span style="color: green;">'form-control'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'disabled' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: navy;">true</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'id' </span></strong><span style="color: black;">=&gt; </span><strong><span style="color: green;">'parent_id'</span></strong><span style="color: black;">]) !!}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">td</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">tr</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">table</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">div </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"col-md-4"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">a </span></strong><strong><span style="color: blue;">href=</span></strong><strong><span style="color: green;">"javascript:</span></strong><em><span style="color: green;">ajaxLoad</span></em><strong><span style="color: green;">('</span></strong><span style="color: black;">{{url(</span><strong><span style="color: green;">'ajaxemployees'</span></strong><span style="color: black;">)}}</span><strong><span style="color: green;">')" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-danger btn-xs"</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br> Назад&lt;/</span><strong><span style="color: navy;">a</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;</span><strong><span style="color: navy;">button </span></strong><strong><span style="color: blue;">type=</span></strong><strong><span style="color: green;">"submit" </span></strong><strong><span style="color: blue;">class=</span></strong><strong><span style="color: green;">"btn btn-primary btn-xs" </span></strong><strong><span style="color: blue;">name=</span></strong><strong><span style="color: green;">"submit" </span></strong><strong><span style="color: blue;">id=</span></strong><strong><span style="color: green;">"submit1"</span></strong><span style="color: black;">&gt;</span><span style="color: black;">Сохранить&lt;/</span><strong><span style="color: navy;">button</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><em><span style="color: gray;">{{-- {!! Form::button("Сохранить",["type" =&gt; "submit","class"=&gt;"btn btn-primary btn-xs"])!!} --}}<br></span></em><span style="color: black;">&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br>&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"><br></span><strong><span style="color: navy;">@endforeach<br></span></strong><span style="color: black;">{!! Form::<em>close</em>() !!}<br></span><span style="color: black;">&lt;/</span><strong><span style="color: navy;">div</span></strong><span style="color: black;">&gt;</span><span style="color: black;"></span>
	</p>
</div>
<p>Далее делаем удаление сотрудника из базы. За это отвечает метод <span style="color: #1cade4;">destroy</span><span style="color: black;"></span>контроллера <span style="color: #1cade4;">AjaxEmployeeController</span><span style="color: black;">.</span><span style="color: black;"></span>
</p>
<p><span style="color: black;">Метод удаления сотрудника из базы. Нужно учесть, что у сотрудника могут быть подчинённые у которых </span><span style="color: black;">parent</span><span style="color: black;">_</span><span style="color: black;">id</span><span style="color: black;"> указывает на удаляющегося сотрудника. В таком случае необходимо предусмотреть перераспределение подчинённых новому руководителю.</span><span style="color: black;"></span>
</p>
<div>
	<p><strong><span style="color: navy;">public</span></strong><strong><span style="color: navy;">
		</span></strong><strong><span style="color: navy;">function</span></strong><strong><span style="color: navy;"> </span></strong><span style="color: black;">destroy</span><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">)<br> {<br></span><em><span style="color: gray;">//Выбираем всех сотрудников где </span></em><em><span style="color: gray;">parent</span></em><em><span style="color: gray;">_</span></em><em><span style="color: gray;">id</span></em><em><span style="color: gray;"> = </span></em><em><span style="color: gray;">id</span></em><em><span style="color: gray;">; Всех подчененных если они есть у сотрудника<br></span></em><span style="color: #660000;">$</span><span style="color: #660000;">employees</span><span style="color: #660000;">_</span><span style="color: #660000;">parent</span><span style="color: #660000;"> </span><span style="color: black;">= </span><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">where</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">parent</span></strong><strong><span style="color: green;">_</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'='</span></strong><span style="color: black;">, </span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">)-&gt;</span><span style="color: black;">get</span><span style="color: black;">();<br></span><span style="color: #660000;">$</span><span style="color: #660000;">data</span><span style="color: #660000;"> </span><span style="color: black;">= </span><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">find</span></em><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">);</span><em><span style="color: gray;">//Выбираем конкретного сотрудника которого будем удалять<br></span></em><strong><span style="color: navy;">if</span></strong><span style="color: black;">(</span><em><span style="color: black;">count</span></em><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">employees</span><span style="color: #660000;">_</span><span style="color: #660000;">parent</span><span style="color: black;">) == </span><span style="color: blue;">0</span><span style="color: black;">){<br></span><em><span style="color: gray;">//Если у сотрудника нет подчиненных то просто удаляем его из базы<br></span></em><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">destroy</span></em><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">);<br> }<br></span><em><span style="color: gray;">//Если ужаляем ген. директора. То необходимо назначить другого работника на его должность<br></span></em><strong><span style="color: navy;">elseif</span></strong><strong><span style="color: navy;">
		</span></strong><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">data</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><strong><span style="color: #660e7a;">_</span></strong><strong><span style="color: #660e7a;">id</span></strong><strong><span style="color: #660e7a;"> </span></strong><span style="color: black;">== </span><span style="color: blue;">1</span><span style="color: black;">)<br> {<br></span><em><span style="color: gray;">//Выбираем сотрудника из базы который ниже по рангу на 1 уровень.<br></span></em><span style="color: #660000;">$</span><span style="color: #660000;">employees</span><span style="color: #660000;"> </span><span style="color: black;">= </span><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">where</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">position</span></strong><strong><span style="color: green;">_</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'='</span></strong><span style="color: black;">, </span><span style="color: #660000;">$</span><span style="color: #660000;">data</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">position</span></strong><strong><span style="color: #660e7a;">_</span></strong><strong><span style="color: #660e7a;">id</span></strong><strong><span style="color: #660e7a;"> </span></strong><span style="color: black;">+ </span><span style="color: blue;">1</span><span style="color: black;">)-&gt;</span><span style="color: black;">first</span><span style="color: black;">();<br></span><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">where</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'='</span></strong><span style="color: black;">, </span><span style="color: #660000;">$</span><span style="color: #660000;">employees</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">)-&gt;</span><span style="color: black;">update</span><span style="color: black;">([</span><strong><span style="color: green;">"</span></strong><strong><span style="color: green;">position</span></strong><strong><span style="color: green;">_</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">" </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">1</span><span style="color: black;">, </span><strong><span style="color: green;">"</span></strong><strong><span style="color: green;">parent</span></strong><strong><span style="color: green;">_</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">" </span></strong><span style="color: black;">=&gt; </span><span style="color: blue;">0</span><span style="color: black;">]);<br></span><em><span style="color: gray;">//Модифицируем сылку на нового начальника(</span></em><em><span style="color: gray;">parent</span></em><em><span style="color: gray;">_</span></em><em><span style="color: gray;">id</span></em><em><span style="color: gray;">)<br></span></em><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">where</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">parent</span></strong><strong><span style="color: green;">_</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">)-&gt;</span><span style="color: black;">update</span><span style="color: black;">([</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">parent</span></strong><strong><span style="color: green;">_</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">' </span></strong><span style="color: black;">=&gt; </span>
	</p>
	<p><span style="color: black;"></span><span style="color: #660000;">$</span><span style="color: #660000;">employees</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">]);<br></span><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">destroy</span></em><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">);</span><em><span style="color: gray;">//Удаляем из базы предыдущего ген. директора<br></span></em><span style="color: black;">}<br></span><strong><span style="color: navy;">else</span></strong><strong><span style="color: navy;"><br></span></strong><span style="color: black;">{<br></span><em><span style="color: gray;">//Необходимо определить начальника сотрудника которому будут переданы подчиненные<br> //Передаем всех подченненных начальнику удаляемого сотрудника.<br></span></em><span style="color: #660000;">$</span><span style="color: #660000;">parent</span><span style="color: #660000;">_</span><span style="color: #660000;">id</span><span style="color: #660000;"> </span><span style="color: black;">= </span><span style="color: #660000;">$</span><span style="color: #660000;">data</span><span style="color: black;">-&gt;</span><strong><span style="color: #660e7a;">parent</span></strong><strong><span style="color: #660e7a;">_</span></strong><strong><span style="color: #660e7a;">id</span></strong><span style="color: black;">;</span><em><span style="color: gray;">//Определяем его начальника<br> //Переносим всех сотрудников к новому начальнику.<br></span></em><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">where</span></em><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">parent</span></strong><strong><span style="color: green;">_</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">, </span><strong><span style="color: green;">'='</span></strong><span style="color: black;">, </span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">)-&gt;</span><span style="color: black;">update</span><span style="color: black;">([</span><strong><span style="color: green;">"</span></strong><strong><span style="color: green;">parent</span></strong><strong><span style="color: green;">_</span></strong><strong><span style="color: green;">id</span></strong><strong><span style="color: green;">" </span></strong><span style="color: black;">=&gt; </span><span style="color: #660000;">$</span><span style="color: #660000;">parent</span><span style="color: #660000;">_</span><span style="color: #660000;">id</span><span style="color: black;">]);<br></span><em><span style="color: gray;">//Удаляем выбраного сотрудника из базы данных<br></span></em><span style="color: black;">Employees</span><span style="color: black;">::</span><em><span style="color: black;">destroy</span></em><span style="color: black;">(</span><span style="color: #660000;">$</span><span style="color: #660000;">id</span><span style="color: black;">);<br> }<br></span><strong><span style="color: navy;">return</span></strong><strong><span style="color: navy;">
		</span></strong><span style="color: black;">redirect</span><span style="color: black;">(</span><strong><span style="color: green;">'</span></strong><strong><span style="color: green;">ajaxemployees</span></strong><strong><span style="color: green;">'</span></strong><span style="color: black;">); </span><em><span style="color: gray;">//Возвращаемся к списку сотрудников.<br></span></em><span style="color: black;">}</span><span style="color: black;"></span>
	</p>
</div>
